(function(t){function e(e){for(var i,s,o=e[0],l=e[1],u=e[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);c&&c(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var l=n[o];0!==r[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/viz-habits/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){},"034fb":function(t,e,n){"use strict";var i=n("8a23"),r=n.n(i);r.a},"2b18":function(t,e,n){},"34e6":function(t,e,n){"use strict";var i=n("034f"),r=n.n(i);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",{attrs:{id:"mainContent"}},[n("full-page",{ref:"fullpage",attrs:{id:"fullpage",options:t.options}},[n("v-container",{staticClass:"section",attrs:{id:"firstPage",fluid:"","data-anchor":"vitrine"}},[t.notChromeOrFirefox?n("v-alert",{attrs:{type:"warning"}},[t._v(" Développement effecuté sous Firefox, vérifié sur Chrome. Préférez utiliser un de ces deux navigateurs. ")]):t._e(),n("h1",[t._v(" Visualisation des habitudes de consommation des smartphones ")]),n("div",{staticStyle:{"text-align":"center","margin-top":"7%","font-size":"1.3em"}},[t._v(" Anthony Bardou, Hugo Polloli, Tristan Syrzisko et Théo Rabut ")]),n("div",{staticStyle:{"text-align":"center",position:"absolute",bottom:"7%",width:"100%"}},[n("v-btn",{staticStyle:{color:"#252835"},attrs:{color:"#f5f9f9"},on:{click:function(e){return t.$refs.fullpage.api.moveSectionDown()}}},[t._v(" Next ")])],1)],1),n("v-container",{staticClass:"section",attrs:{fluid:"","data-anchor":"explications"}},[n("v-row",[n("v-col",{staticStyle:{"text-align":"center",margin:"auto",padding:"0 3%","margin-bottom":"3%"},attrs:{cols:"6"}},[n("h2",{staticStyle:{"text-transform":"uppercase"}},[t._v(" Contexte ")]),n("p",[t._v("Le smartphone est une technologie qui s'est ancrée profondément dans nos sociétés développées. Outil permettant de naviguer parmi un grand ensemble d'applications, nous l'utilisons plusieurs fois par jour, chacun à notre manière. Dans ce projet, nous avons voulu représenter les profils, les façons dont les différents utilisateurs naviguent dans leur téléphone. Cette visualisation, qui s'inscrit dans le contexte de l'explosion des flux de données et du "),n("em",[t._v("Quantified Self")]),t._v(", permet à un utilisateur curieux comme à un expert cherchant à visualiser des comportements d'explorer différents profils de consommation selon différents critères comme la période temporelle, la localisation ou encore le temps d'utilisation de chaque application.")])]),n("v-col",{staticStyle:{"text-align":"center",padding:"0 3%"},attrs:{cols:"6"}},[n("h2",{staticStyle:{"text-transform":"uppercase"}},[t._v(" Collection des données ")]),n("p",[t._v("Les données que nous utilisons ont été collectées par nos soins, sur nous-mêmes, grâce à l'application App Usage. Elle permet un export de l'activité de l'utilisateur du téléphone sur lequel elle est installée. En croisant ces données avec nos historiques des positions (collectés et fournis par Google), nous pouvons alors constituer un dataset en JSON liant temps d'utilisation des applications, positions géographiques et temporelles.")])])],1),n("v-row",[n("v-col",{staticStyle:{"text-align":"center",padding:"0 3%"},attrs:{cols:"6"}},[n("h2",{staticStyle:{"text-transform":"uppercase"}},[t._v(" Graphe de switch ")]),n("p",[t._v("Dans cette première visualisation, les données sont représentées par un graphe, dans lequel les noeuds incarnent les applications (dont la taille varie en fonction de leur temps d'utilisation). Deux noeuds sont liés si l'utilisateur est passé d'une application à l'autre (la largeur des arêtes représentant le nombre de fois que l'utilisateur a effectué ce basculement). En jouant avec les filtres liés à la visualisation, on peut se rendre compte de plusieurs types de consommation différentes, en fonction du lieu et de l'heure de la journée.")])]),n("v-col",{staticStyle:{"text-align":"center",padding:"0 3%"},attrs:{cols:"6"}},[n("h2",{staticStyle:{"text-transform":"uppercase"}},[t._v(" Arbre radial ")]),n("p",[t._v("Pour cette seconde visualisation, les données sont représentées par un arbre radial (Radial Tree) et représente des enchainements d'applications, du moment où le téléphone est déverrouillé jusqu'au moment où il se remet en veille. Chaque noeud du graphe est une application, et chaque arête entre deux noeuds représente un switch entre ces deux applications. Cette visualisation nous permet alors d'explorer les séquences les plus fréquentes d'applications, et nous donne la possibilité de visualiser le profil de consommation d'un utilisateur d'une manière différente.")])])],1),n("div",{staticStyle:{"text-align":"center",position:"absolute",bottom:"7%",width:"100%"}},[n("v-btn",{staticStyle:{color:"#252835"},attrs:{color:"#f5f9f9"},on:{click:function(e){return t.$refs.fullpage.api.moveSectionDown()}}},[t._v(" Voir la visualisation ")])],1)],1),n("v-container",{staticClass:"section",attrs:{fluid:"","data-anchor":"visualisation","pt-1":""}},[t.fetched?n("v-row",[n("v-col",{staticStyle:{"border-right":"1px solid black"},attrs:{cols:"5"}},[t.visu?n("FilterGroup"):n("FilterGroupRadial")],1),n("v-col",{attrs:{cols:"7"}},[t.visu?n("ForceGraph",{on:{changeVisu:t.changeVisu}}):n("RadialTree",{on:{changeVisu:t.changeVisu}})],1)],1):n("v-container",{staticStyle:{"text-align":"center"}},[n("v-progress-circular",{staticStyle:{"margin-top":"200px"},attrs:{size:200,width:20,color:"red",indeterminate:""}})],1)],1)],1)],1)],1)},a=[],s=(n("4de4"),n("c975"),n("d3b7"),n("2ca0"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","pb-0":""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("Slider",{attrs:{nbbins:140,htmlid:"slider"},on:{sliderChange:t.sliderChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-container",{attrs:{"pa-5":""}},[n("RadialTreeUserFilter",{on:{userChange:t.userChange}})],1)],1),n("v-col",{attrs:{cols:"6"}},[n("TimePeriodPicker",{on:{timePickerChange:t.timePickerChange}})],1),n("MapFilter",{attrs:{"default-users":[1]},on:{mapChange:t.mapChange}})],1)],1)}),o=[],l=(n("99af"),n("caad"),n("13d5"),n("6062"),n("2532"),n("3ca3"),n("ddb0"),n("2909")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v("Filtre les applications provenant des utilisateurs décochés")])]),n("v-radio-group",{on:{change:t.changed},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[n("v-radio",{attrs:{value:"User1",default:"checked"},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" John Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#CC2A36",border:"1px solid #bbb"}})])]},proxy:!0}])}),n("v-radio",{attrs:{value:"User2"},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" Richard Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#4F372D",border:"1px solid #bbb"}})])]},proxy:!0}])}),n("v-radio",{attrs:{value:"User3"},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" Jane Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#00A0B0",border:"1px solid #bbb"}})])]},proxy:!0}])})],1)],1)},c=[],h=(n("a4d3"),n("e01a"),n("d28b"),n("e25e"),n("ac1f"),n("5319"),n("3835")),d={name:"RadialTreeUserFilter",data:function(){return{selected:"User1",label:"Utilisateurs"}},methods:{changed:function(){var t=[],e=[];e.push(parseInt(this.selected.replace("User","")));var n=!0,i=!1,r=void 0;try{for(var a,s=this.$store.state.data.entries()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=Object(h["a"])(a.value,2),l=o[0],u=o[1];e.includes(u.User_ID)||t.push(l)}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}this.$emit("userChange",t),this.$root.$emit("userChangeGlobal",e)}}},p=d,f=(n("34e6"),n("2877")),m=n("6544"),g=n.n(m),v=n("a523"),_=n("67b6"),y=n("43a6"),b=n("3a2f"),x=Object(f["a"])(p,u,c,!1,null,null,null),w=x.exports;g()(x,{VContainer:v["a"],VRadio:_["a"],VRadioGroup:y["a"],VTooltip:b["a"]});var S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{display:"inline"},attrs:{id:"container-"+t.htmlid}},[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v(" "+t._s(t.filterExplanation)+" ")])]),n("svg",{attrs:{id:t.htmlid}})],1)},k=[],C=(n("d81d"),n("4e82"),n("a9e3"),n("b64b"),n("5698"));n("498a");function A(t){var e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content.firstChild}var j={name:"Slider",props:{nbbins:{default:null,type:Number},htmlid:{default:null,type:String}},computed:{label:function(){return"Largeur des chemins"},filterExplanation:function(){return"Sélection du minimum de la taille des arêtes, afin de rendre l'arbre plus ou moins dense et de conserver les séquences plus ou moins importantes"},tooltip_style:function(){return"\n\t\t\t\tcolor: ".concat(this.selColor,";\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tpadding: .4em;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tborder: 2px solid ").concat(this.selColor,";\n\t\t\t\tfont-size: 0.8em;\n\t\t\t\tfont-weight: bold;\n\t\t\t\topacity: 0.9;\n\t\t\t\tposition: absolute;\n\t\t\t")}},mounted:function(){var t=this;this.setDefaultDataValues(),this.$root.$on("redrawSlider",(function(){t.build_slider()})),this.width=document.getElementById("container-"+this.htmlid).parentNode.offsetWidth,this.width=this.width-this.margin.left-this.margin.right,this.tooltips=[C["q"]("body").append((function(){return A('<div id="'.concat(t.htmlid,'-tt" style="').concat(t.tooltip_style,'" class="hidden tooltipSlider" />'))}))],this.svg=C["q"]("#"+this.htmlid).attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.heightHist+this.margin.bet+this.thickness+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.build_slider()},methods:{setDefaultDataValues:function(){this.svg=null,this.bins=null,this.thickness=5,this.cursorRad=7,this.selColor="#69b3a2",this.unselColor="#666",this.margin={top:10,left:10,right:10,bottom:10,bet:15},this.selected=[0,1],this.heightHist=100,this.width=400,this.tooltips=null,this.utime=null,this.links=null,this.min=null,this.max=null,this.pp_data=null,this.test={},this.model=[],this.max_to_exclude=0},sendEvent:function(){this.$emit("sliderChange",this.selected[0])},_pp_data:function(){return this.sequences()},_min:function(){return 0==this.pp_data.length?0:this.pp_data.reduce((function(t,e){return Math.min(t,e)}))},_max:function(){return 0==this.pp_data.length?1:this.pp_data.reduce((function(t,e){return Math.max(t,e)}))},update_computed:function(){this.pp_data=this._pp_data(),this.min=this._min(),this.max=this._max()},build_slider:function(){var t=this;this.update_computed(),this.svg.selectAll("*").remove();var e=this,n=Math.min(this.nbbins,this.max-this.min),i=C["o"]().domain([this.min,this.max]).range([0,this.width]),r=C["p"]().range([this.heightHist,0]),a=C["k"]().domain(i.domain()).thresholds(i.ticks(n));this.bins=a(this.pp_data),this.selected=[3,this.bins[this.bins.length-1].x1],r.domain([0,C["m"](this.bins,(function(t){return t.length}))]);var s=this.svg.selectAll("rect").data(this.bins);s.enter().append("rect").attr("x",(function(t){return i(t.x0)})).attr("y",(function(t){return r(t.length)})).attr("width",(function(t){return i(t.x1)-i(t.x0)-1})).attr("height",(function(t){return e.heightHist-r(t.length)})).style("fill",(function(e){return e.x0>=t.selected[0]&&e.x1<=t.selected[1]?t.selColor:t.unselColor})),this.draw_slider_line(i),this.svg.selectAll("cursors").data([this.selected[0]]).enter().append("circle").attr("cx",i(this.selected[0])).attr("cy",this.heightHist+this.margin.bet).attr("r",this.cursorRad).style("fill",this.selColor).on("mouseover",(function(){return e.show_tooltips()})).on("mouseout",(function(){return e.hide_tooltips()})).call(C["d"]().on("start",(function(){return e.show_tooltips()})).on("drag",(function(){return t.dragged()})).on("end",(function(){e.hide_tooltips(),e.sendEvent()}))),this.sendEvent()},dragged:function(){var t=this;this.show_tooltips();var e=C["o"]().domain([this.min,this.max]).range([0,this.width]),n=this.get_cursor_index(e),i="x0";this.selected[0]=this.bins[n][i],this.draw_slider_line(e,!1),this.svg.selectAll("circle").attr("cx",e(this.bins[n][i])),this.svg.selectAll("rect").style("fill",(function(e){return e.x0>=t.selected[0]&&e.x1<=t.selected[1]?t.selColor:t.unselColor}))},get_cursor_index:function(t){for(var e="x0",n=this.bins.map((function(n){return Math.abs(t(n[e])-C["e"].x)})),i=0,r=1;r<n.length;r++)n[r]<n[i]&&(i=r);return i},draw_slider_line:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=[{x0:this.min,x1:this.max,c:this.unselColor,d:e},{x0:this.selected[0],x1:this.max,c:this.selColor,d:!0}].filter((function(t){return t.d})),r=C["q"]("#"+this.htmlid).selectAll("line");e||(r=r.filter((function(t,e){return 1==e}))),r.remove(),this.svg.selectAll("slines").data(i).enter().append("line").attr("x1",(function(e){return t(e.x0)})).attr("y1",this.heightHist+this.margin.bet).attr("x2",(function(e){return t(e.x1)})).attr("y2",this.heightHist+this.margin.bet).attr("stroke",(function(t){return t.c})).attr("stroke-width",this.thickness).on("mouseover",(function(){return n.show_tooltips()})).on("mouseout",(function(){return n.hide_tooltips()}))},show_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!1).style("left",window.pageXOffset+this.getBoundingClientRect().left-t.cursorRad+"px").style("top",window.pageYOffset+this.getBoundingClientRect().top+25+"px").html(t.selected[n])}))},hide_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!0)}))},sequences:function(){var t=this;this.model=[],this.max_to_exclude=0;for(var e=new Set,n=JSON.parse(JSON.stringify(this.$store.state.fdata)),i=Object.keys(n),r=0;r<i.length;r++)n[i[r]]["row_id"]=r;var a=!0,s=!1,o=void 0;try{for(var l,u=n[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;e.add(c["User_ID"])}}catch(w){s=!0,o=w}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}var h=[],d=!0,p=!1,f=void 0;try{for(var m,g=function(){var t=m.value,e=n.filter((function(e){return e["User_ID"]==t})).sort((function(t,e){return t.Time-e.Time})),i=[],r=!1,a=[],s=!0,o=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value;if("Screen on (unlocked)"===d["App Name"]&&!r||"Screen on (unlocked)"===d["App Name"]&&1===a.length)a=[["Screen on (unlocked)",d["row_id"]]],r=!0;else if("Screen off"==d["App Name"]&&r)i.push({path:a}),r=!1;else if(r){if(a.length>1&&d["App Name"]==a[a.length-1])continue;a.push([d["App Name"],d["row_id"]])}}}catch(w){o=!0,l=w}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}_=i.reduce((function(t,e){return e.path.reduce((function(t,e){return t[e[0]]=t[e[0]]||{nb_use:0,row_id:[]},t[e[0]]["nb_use"]+=1,t[e[0]]["row_id"].push(e[1]),t[e[0]]}),t),t}),{}),h.push(_)},v=e[Symbol.iterator]();!(d=(m=v.next()).done);d=!0){var _;g()}}catch(w){p=!0,f=w}finally{try{d||null==v.return||v.return()}finally{if(p)throw f}}var y=h[0],b=Object.keys(y)[0];this.set_app_nb_use_by_index(b,y[b]);var x=this.model.filter((function(e){return e!=t.max_to_exclude}));return x},set_app_nb_use_by_index:function(t,e){var n=Object.keys(e);if(n.length>0){var i=!0,r=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;"nb_use"!=l&&"row_id"!=l&&this.set_app_nb_use_by_index(l,e[l])}}catch(m){r=!0,a=m}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}this.model.push(e["nb_use"]),e["nb_use"]>this.max_to_exclude&&(this.max_to_exclude=e["nb_use"]);var u=!0,c=!1,h=void 0;try{for(var d,p=e["row_id"][Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;this.test[f]=[t,e["nb_use"]]}}catch(m){c=!0,h=m}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}}}},D=j,O=(n("a334"),Object(f["a"])(D,S,k,!1,null,null,null)),$=O.exports;g()(O,{VContainer:v["a"],VTooltip:b["a"]});var R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"mapFilter-container","pa-0":""}},[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v(" Permet via l'utilisation de l'outil lasso de dessiner des zones restreignant la position où les applications ont été utilisées ")])]),n("v-container",{staticClass:"d-inline-flex pa-0",attrs:{outlined:""}},[n("div",[n("div",{style:{width:t.mapWidth+"px"},attrs:{id:"map"}})]),n("v-container",{staticStyle:{"text-align":"center"},attrs:{"grid-list-xs":"","pr-0":""}},[n("v-btn",{staticStyle:{color:"#252835"},attrs:{color:"#f5f9f9"},on:{click:t.clearLast}},[t._v(" Clear last ")]),n("br"),n("br"),n("v-btn",{staticStyle:{color:"#252835"},attrs:{color:"#f5f9f9"},on:{click:t.clearAll}},[t._v(" Clear all ")])],1)],1)],1)},T=[],F=(n("0481"),n("a630"),n("4069"),n("e11e")),q=n.n(F);n("67de");q.a.Map.addInitHook("addHandler","selectAreaFeature",q.a.SelectAreaFeature);var N={name:"Map",props:{defaultUsers:{type:Array,default:function(){return[1,2,3]}}},data:function(){return{latitudeRange:[0,1],longitudeRange:[0,1],mapWidth:null,label:"Données géographiques"}},mounted:function(){var t,e,n,i,r,a,s,o,l,u,c,d,p,f,m,g,v,_,y,b,x=this;return regeneratorRuntime.async((function(w){while(1)switch(w.prev=w.next){case 0:for(this.toKeep=[],this.toDel=[],this.pointsWithLatLng=[],this.circles=[],t=document.getElementById("mapFilter-container").parentNode.offsetWidth,this.mapWidth=t-150,this.posData=JSON.parse(JSON.stringify(this.$store.state.data)),e=45.782569,n=4.86673,this.map=new q.a.Map("map",{preferCanvas:!0}).setView([e,n],8),new q.a.TileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',minZoom:1,maxZoom:20}).addTo(this.map),this.colorScale=["#CC2A36","#4F372D","#00A0B0"],i=!0,r=!1,a=void 0,w.prev=14,s=this.posData.entries()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)l=Object(h["a"])(o.value,2),u=l[0],c=l[1],void 0!=c.Lat&&void 0!=c.Long&&(this.posData[u].latlng=new q.a.LatLng(c.Lat,c.Long),this.defaultUsers.includes(c.User_ID)&&(d=this.colorScale,this.circles.push(q.a.circle(c.latlng,{color:d[c.User_ID-1],radius:3}).addTo(this.map))));w.next=22;break;case 18:w.prev=18,w.t0=w["catch"](14),r=!0,a=w.t0;case 22:w.prev=22,w.prev=23,i||null==s.return||s.return();case 25:if(w.prev=25,!r){w.next=28;break}throw a;case 28:return w.finish(25);case 29:return w.finish(22);case 30:for(p=!0,f=!1,m=void 0,w.prev=33,g=this.$store.state.data.entries()[Symbol.iterator]();!(p=(v=g.next()).done);p=!0)_=Object(h["a"])(v.value,2),y=_[0],b=_[1],this.toDel.push(y),null!=b.Lat&&null!=b.Long&&this.pointsWithLatLng.push(y);w.next=41;break;case 37:w.prev=37,w.t1=w["catch"](33),f=!0,m=w.t1;case 41:w.prev=41,w.prev=42,p||null==g.return||g.return();case 44:if(w.prev=44,!f){w.next=47;break}throw m;case 47:return w.finish(44);case 48:return w.finish(41);case 49:this.selectFeature=this.map.selectAreaFeature.enable(),this.selectFeature.options.color="#05ac72",this.selectFeature.options.weight=3,this.selectFeature.disable(),this.buildCustomControl(),this.map.on("DrewArea",(function(){return x.sendEvent(!0)})),this.$root.$on("userChangeGlobal",(function(t){return x.redrawUserPoints(t)})),setTimeout((function(){x.map.invalidateSize()}),1e3);case 57:case"end":return w.stop()}}),null,this,[[14,18,22,30],[23,,25,29],[33,37,41,49],[42,,44,48]])},methods:{redrawUserPoints:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=this.circles[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.map.removeLayer(s)}}catch(g){n=!0,i=g}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.circles=[];var o=!0,l=!1,u=void 0;try{for(var c,d=this.posData.entries()[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=Object(h["a"])(c.value,2),f=(p[0],p[1]);if(void 0!=f.Lat&&void 0!=f.Long&&t.includes(f.User_ID)){var m=this.colorScale;this.circles.push(q.a.circle(f.latlng,{color:m[f.User_ID-1],radius:3}).addTo(this.map))}}}catch(g){l=!0,u=g}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}},buildCustomControl:function(){var t=this,e=q.a.Control.extend({options:{position:"topright"},onAdd:function(e){var n=q.a.DomUtil.create("div","leaflet-bar leaflet-control leaflet-control-custom leaflet-control-lasso");return q.a.DomEvent.disableClickPropagation(n),n.style.backgroundColor="white",n.style.width="35px",n.style.height="35px",n.style.cursor="pointer",n.onclick=function(){t.selectFeature._enabled?(t.selectFeature.disable(),n.style.backgroundColor="white"):(t.selectFeature.enable(),n.style.backgroundColor="#D2E190")},n}});this.map.addControl(new e)},clearLast:function(){var t=this.selectFeature.removeLastArea();t&&(this.toKeep.pop(),this.sendEvent(!1))},clearAll:function(){var t=this.selectFeature.removeAllArea();t&&(this.toKeep=[],this.sendEvent(!1))},sendEvent:function(t){if(t){var e=[],n=JSON.parse(JSON.stringify(this.selectFeature.getAreaLatLng())),i=this.$store.state.data,r=n.length,a=!0,s=!1,o=void 0;try{for(var l,u=this.pointsWithLatLng[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,h=0,d=0,p=!1;for(h=0,d=r-1;h<r;d=h++)n[h].lat>i[c].Lat!=n[d].lat>i[c].Lat&&i[c].Long<(n[d].lng-n[h].lng)*(i[c].Lat-n[h].lat)/(n[d].lat-n[h].lat)+n[h].lng&&(p=!p);p&&e.push(c)}}catch(v){s=!0,o=v}finally{try{a||null==u.return||u.return()}finally{if(s)throw o}}this.toKeep.push(e)}var f=[];if(this.toKeep.length>0){var m=JSON.parse(JSON.stringify(this.toDel)),g=Array.from(new Set(this.toKeep.flat()));f=m.filter((function(t){return!g.includes(t)}))}this.$emit("mapChange",f)}}},M=N,E=(n("65fd"),n("8336")),V=Object(f["a"])(M,R,T,!1,null,null,null),L=V.exports;g()(V,{VBtn:E["a"],VContainer:v["a"],VTooltip:b["a"]});var P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"picker-component"}},[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v(" Filtre les occurences d'application en dehors des plages journalières/horaires définies ")])]),n("v-container",{attrs:{id:"picker-container"}}),t.initialized?n("Ring",{attrs:{id:"ring_1",name:"days",svg:t.svg,tooltip:t.tooltip,cx:t.cx,cy:135,outrad:132,inrad:112,selcol:"#4CAF50",unselcol:"#666",data:t.daysTooltips},on:{ringChange:t.ringChange}}):t._e(),t.initialized?n("Ring",{attrs:{id:"ring_2",name:"hours",svg:t.svg,tooltip:t.tooltip,cx:t.cx,cy:135,outrad:106,inrad:86,selcol:"#69b3a2",unselcol:"#666",data:t.hoursTooltips},on:{ringChange:t.ringChange}}):t._e()],1)},U=[],B=(n("0d03"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")}),I=[],z=(n("cb29"),n("b0c0"),{name:"Ring",props:{svg:{default:null,type:Object},tooltip:{default:null,type:Object},id:{default:null,type:String},name:{default:null,type:String},cx:{default:null,type:Number},cy:{default:null,type:Number},outrad:{default:null,type:Number},inrad:{default:null,type:Number},selcol:{default:null,type:String},unselcol:{default:null,type:String},data:{default:null,type:Array}},data:function(){return{selected:null}},computed:{l:function(){return this.data.length},s_size:function(){return 1/(this.l*Math.PI)},r_length:function(){return 2*Math.PI/this.l},a_size:function(){return this.r_length-this.s_size},draggingState:function(){return this.$store.state.draggingState}},watch:{selected:{handler:function(t){var e=this.name;this.$emit("ringChange",t,e)},deep:!0}},mounted:function(){this.selected=new Array(this.l).fill(!0),this.draw(),this.parent=this.$el.parentNode},methods:{color:function(t){return this.selected[t]?this.selcol:this.unselcol},mouse_move:function(t,e){var n=navigator.userAgent.indexOf("Chrome")>-1,i=C["n"](e);n||(i[1]+=2*document.body.clientHeight),this.tooltip.classed("hidden",!1).style("left",window.pageXOffset+i[0]+this.cx+"px").style("top",window.pageYOffset+i[1]+this.cy+"px").html(t)},extendVector:function(t,e){"days"==this.name&&(e+=10);var n=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),i=n+e,r=[t[0]/n*i,t[1]/n*i];return"days"==this.name&&(r[0]-=10),r},mouse_over:function(t,e){if(this.draggingState.dragging){if(this.draggingState.dragStartRing&&this.draggingState.dragStartRing.includes(e)){this.$set(this.selected,t,!this.selected[t]);var n=this.color(t);C["q"](e).style("fill",n)}}else{var i=this.selected[t]?this.unselcol:this.selcol;C["q"](e).style("fill",i)}},mouse_out:function(t,e){if(!this.draggingState.dragging||!this.draggingState.dragStartRing||!this.draggingState.dragStartRing.includes(e)){var n=this.color(t);C["q"](e).transition().duration(300).style("fill",n)}this.tooltip.classed("hidden",!0)},on_click:function(t,e){this.$set(this.selected,t,!this.selected[t]);var n=this.color(t);C["q"](e).style("fill",n)},draw_arc:function(t){return C["a"]().innerRadius(this.inrad).outerRadius(this.outrad).startAngle(t*this.r_length).endAngle(t*this.r_length+this.a_size)},draw:function(){var t=this;this.g=this.svg.append("g"),this.g.selectAll(this.id).data(this.data).enter().append("path").attr("transform","translate(".concat(t.cx,", ").concat(t.cy,")")).attr("d",(function(e,n){return t.draw_arc(n)()})).attr("fill",(function(e,n){return t.color(n)})).on("mousemove",(function(e){t.mouse_move(e,this)})).on("mouseout",(function(e,n){t.mouse_out(n,this)})).on("mouseover",(function(e,n){t.mouse_over(n,this)})).on("mousedown",(function(e,n,i){t.$set(t.selected,n,!t.selected[n]),t.setDraggingState(!0,i,e)})).on("mouseup",(function(e,n){t.setDraggingState(!1,null,null)}))},setDraggingState:function(t,e,n){this.$store.commit("setDraggingState",{dragging:t,dragStartRing:e,firstObject:n})}}}),H=z,G=Object(f["a"])(H,B,I,!1,null,null,null),J=G.exports,W={name:"TimePeriodPicker",components:{Ring:J},data:function(){return{daysTooltips:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],svg:null,tooltip:null,initialized:!1,cx:null,timePicker:{},label:"Période temporelle (jours, heures)"}},computed:{hoursTooltips:function(){var t=Object(l["a"])(Array(24).keys());for(var e in t)t[e]=e>12?"".concat(e-12,"pm"):"".concat(e,"am");return t}},mounted:function(){var t=document.getElementById("picker-container"),e=t.offsetWidth;this.svg=C["q"](t).append("svg").attr("width",e).attr("height",270),this.cx=e/2,this.tooltip=C["q"](document.getElementById("picker-container")).append((function(){return A('<div class="hidden tooltipTimePicker" />')})),this.initialized=!0},methods:{ringChange:function(t,e){if(this.timePicker[e]=t,!(Object.keys(this.timePicker).length<2)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=this.$store.state.data.entries()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=Object(h["a"])(s.value,2),u=l[0],c=l[1];if(isNaN(c.Time))n.push(u);else{var d=new Date(1e3*c.Time),p=d.getDay()-1;-1==p&&(p=6),this.timePicker["days"][p]&&this.timePicker["hours"][d.getHours()]||n.push(u)}}}catch(f){r=!0,a=f}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}this.$emit("timePickerChange",n)}}}},K=W,X=(n("7a20"),Object(f["a"])(K,P,U,!1,null,null,null)),Y=X.exports;g()(X,{VContainer:v["a"],VTooltip:b["a"]});var Z={name:"FilterGroupRadial",components:{MapFilter:L,Slider:$,TimePeriodPicker:Y,RadialTreeUserFilter:w},mounted:function(){this.index_filtered=[new Set,new Set,new Set],this.range_filtered=new Array,this.edges_filtered=new Array},methods:{mapChange:function(t){this.index_filtered[0]=new Set(t),this.filter_norange()},sliderChange:function(t){this.$store.commit("setRadialMinimum",t),this.$root.$emit("redrawRadialTree")},userChange:function(t){this.index_filtered[1]=new Set(t),this.filter_norange()},timePickerChange:function(t){this.index_filtered[2]=new Set(t),this.filter_norange()},filter_norange:function(){var t;t=this.index_filtered;var e=t.reduce((function(t,e){return new Set([].concat(Object(l["a"])(t),Object(l["a"])(e)))})),n=this.$store.state.data.filter((function(t,n){return!e.has(n)}));this.$store.commit("setFilteredDataset",n),this.$store.commit("setFinalDataset",n),this.$root.$emit("redrawSlider"),this.$root.$emit("redrawRadialTree")},filter_range:function(){var t=this,e=this.$store.state.fdata.filter((function(e,n){return!t.range_filtered.includes(n)}));this.$store.commit("setFinalDataset",e),this.$root.$emit("redrawRadialTree")}}},Q=Z,tt=n("62ad"),et=n("0fd9"),nt=Object(f["a"])(Q,s,o,!1,null,null,null),it=nt.exports;g()(nt,{VCol:tt["a"],VContainer:v["a"],VRow:et["a"]});var rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","pb-0":""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"6"}},[n("RangeSlider",{attrs:{subject:"time",nbbins:70,htmlid:"time"},on:{rangeChange:t.rangeChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("RangeSlider",{attrs:{subject:"switch",nbbins:70,delta:10,htmlid:"switch"},on:{rangeChange:t.rangeChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-container",{attrs:{"pa-2":""}},[n("UserFilter",{on:{userChange:t.userChange}})],1)],1),n("v-col",{attrs:{cols:"6"}},[n("TimePeriodPicker",{on:{timePickerChange:t.timePickerChange}})],1),n("MapFilter",{on:{mapChange:t.mapChange}})],1)],1)},at=[],st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v("Filtre les applications provenant des utilisateurs décochés")])]),n("v-checkbox",{attrs:{color:"#f5f9f9",value:"User1",default:"checked"},on:{change:t.changed},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" John Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#CC2A36",border:"1px solid #bbb"}})])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),n("v-checkbox",{attrs:{color:"#f5f9f9",value:"User2"},on:{change:t.changed},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" Richard Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#4F372D",border:"1px solid #bbb"}})])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),n("v-checkbox",{attrs:{color:"#f5f9f9",value:"User3"},on:{change:t.changed},scopedSlots:t._u([{key:"label",fn:function(){return[n("div",{staticClass:"input-color"},[t._v(" Jane Doe "),n("span",{staticClass:"dot",staticStyle:{"background-color":"#00A0B0",border:"1px solid #bbb"}})])]},proxy:!0}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},ot=[],lt=(n("4160"),n("159b"),{name:"UserFilter",data:function(){return{selected:["User1","User2","User3"],label:"Utilisateurs"}},methods:{changed:function(){var t=[],e=[];this.selected.forEach((function(t){e.push(parseInt(t.replace("User","")))}));var n=!0,i=!1,r=void 0;try{for(var a,s=this.$store.state.data.entries()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=Object(h["a"])(a.value,2),l=o[0],u=o[1];e.includes(u.User_ID)||t.push(l)}}catch(c){i=!0,r=c}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}this.$emit("userChange",t),this.$root.$emit("userChangeGlobal",e)}}}),ut=lt,ct=(n("b99c"),n("ac7c")),ht=Object(f["a"])(ut,st,ot,!1,null,null,null),dt=ht.exports;g()(ht,{VCheckbox:ct["a"],VContainer:v["a"],VTooltip:b["a"]});var pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{display:"inline"},attrs:{id:"container-"+t.htmlid}},[t._v(" "+t._s(t.label)+" "),n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{title:""}},i))]}}])},[n("div",[t._v(" "+t._s(t.filterExplanation)+" ")])]),n("svg",{attrs:{id:t.htmlid}})],1)},ft=[],mt=(n("07ac"),n("25f0"),{name:"RangeSlider",props:{subject:{default:null,type:String},nbbins:{default:null,type:Number},delta:{default:null,type:Number},htmlid:{default:null,type:String}},computed:{label:function(){var t=this.htmlid;return"time"===t?"Temps d'utilisation des applications (s)":"switch"===t?"Nombre de switchs entre applications":t},filterExplanation:function(){var t=this.htmlid;return"time"===t?"Filtre de la visualisation les applications dont le temps d'utilisation est en dehors des limites fixées par ce slider":"switch"===t?"Filtre de la visualisation les arêtes dont le nombre d'occurrences est en dehors des limites fixées par ce slider":t},tooltip_style:function(){return"\n\t\t\t\tcolor: ".concat(this.selColor,";\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tpadding: .4em;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tborder: 2px solid ").concat(this.selColor,";\n\t\t\t\tfont-size: 0.8em;\n\t\t\t\tfont-weight: bold;\n\t\t\t\topacity: 0.9;\n\t\t\t\tposition: absolute;\n\t\t\t")}},mounted:function(){var t=this;this.setDefaultDataValues(),this.$root.$on("redrawSlider",(function(){t.build_slider()})),this.width=document.getElementById("container-"+this.htmlid).offsetWidth+50,this.width=this.width-this.margin.left-this.margin.right,this.tooltips=[C["q"]("body").append((function(){return A('<div id="'.concat(t.htmlid,'-tt1" style="').concat(t.tooltip_style,'" class="hidden tooltipSlider" />'))})),C["q"]("body").append((function(){return A('<div id="'.concat(t.htmlid,'-tt2" style="').concat(t.tooltip_style,'" class="hidden tooltipSlider" />'))}))],this.svg=C["q"]("#"+this.htmlid).attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.heightHist+this.margin.bet+this.thickness+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.build_slider()},methods:{setDefaultDataValues:function(){this.svg=null,this.bins=null,this.thickness=5,this.cursorRad=7,this.selColor="#69b3a2",this.unselColor="#666",this.margin={top:10,left:10,right:10,bottom:10,bet:15},this.selected=[0,1],this.heightHist=100,this.width=400,this.tooltips=null,this.utime=null,this.links=null,this.min=null,this.max=null,this.app_names=null,this.pp_data=null,this.test={},this.model=[]},sendEvent:function(){var t=[];if("time"==this.subject){var e=[];for(var n in this.utime)(this.utime[n]<this.selected[0]||this.utime[n]>this.selected[1])&&e.push(n);for(var i in this.$store.state.fdata)-1!=e.indexOf(this.$store.state.fdata[i]["App Name"])&&t.push(parseInt(i))}else if("switch"==this.subject)for(var r in this.links)for(var a in this.links[r])(this.links[r][a]<this.selected[0]||this.links[r][a]>this.selected[1])&&t.push([r,a]);this.$emit("rangeChange",t,this.htmlid)},_app_names:function(){var t=new Set,e=!0,n=!1,i=void 0;try{for(var r,a=this.$store.state.fdata[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;t.add(s["App Name"])}}catch(o){n=!0,i=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return Array.from(t)},_pp_data:function(){if("time"==this.subject){for(var t=this.time_usage(),e=[],n=0,i=Object.values(t);n<i.length;n++){var r=i[n];e.push(r)}return e}if("switch"==this.subject){var a=this.switches(),s=[];for(var o in a)for(var l=0,u=Object.values(a[o]);l<u.length;l++){var c=u[l];0!=c&&s.push(c)}return s}if("sequences"==this.subject)this.sequences();return null},_min:function(){return 0==this.pp_data.length?0:this.pp_data.reduce((function(t,e){return Math.min(t,e)}))},_max:function(){return 0==this.pp_data.length?1:this.pp_data.reduce((function(t,e){return Math.max(t,e)}))},update_computed:function(){this.app_names=this._app_names(),this.pp_data=this._pp_data(),this.min=this._min(),this.max=this._max()},build_slider:function(){var t=this;this.update_computed(),this.svg.selectAll("*").remove();var e=this,n=Math.min(this.nbbins,this.max-this.min),i=C["o"]().domain([this.min,this.max]).range([0,this.width]),r=C["p"]().range([this.heightHist,0]),a=C["k"]().domain(i.domain()).thresholds(i.ticks(n));this.bins=a(this.pp_data),this.selected=[this.bins[0].x0,this.bins[this.bins.length-1].x1],r.domain([0,C["m"](this.bins,(function(t){return t.length}))]);var s=this.svg.selectAll("rect").data(this.bins);s.enter().append("rect").attr("x",(function(t){return i(t.x0)})).attr("y",(function(t){return r(t.length)})).attr("width",(function(t){return i(t.x1)-i(t.x0)-1})).attr("height",(function(t){return e.heightHist-r(t.length)})).style("fill",(function(e){return e.x0>=t.selected[0]&&e.x1<=t.selected[1]?t.selColor:t.unselColor})),this.draw_slider_line(i),this.svg.selectAll("cursors").data(this.selected).enter().append("circle").attr("cx",(function(t){return i(t)})).attr("cy",this.heightHist+this.margin.bet).attr("r",this.cursorRad).style("fill",this.selColor).on("mouseover",(function(){return e.show_tooltips()})).on("mouseout",(function(){return e.hide_tooltips()})).call(C["d"]().on("start",(function(){return e.show_tooltips()})).on("drag",(function(e,n){return t.dragged(n)})).on("end",(function(){e.hide_tooltips(),e.sendEvent()}))),this.sendEvent()},dragged:function(t){var e=this;this.show_tooltips();var n=C["o"]().domain([this.min,this.max]).range([0,this.width]),i=this.get_cursor_index(t,n),r="x"+t;this.selected[t]=this.bins[i][r],this.draw_slider_line(n,!1),this.svg.selectAll("circle").filter((function(e,n){return n==t})).attr("cx",n(this.bins[i][r])),this.svg.selectAll("rect").style("fill",(function(t){return t.x0>=e.selected[0]&&t.x1<=e.selected[1]?e.selColor:e.unselColor}))},get_cursor_index:function(t,e){for(var n=this.svg.selectAll("circle").filter((function(e,n){return n!=t})).attr("cx"),i=this.get_point_index(n,"x"+(1-t),this.bins,e),r="x"+t,a=this.bins.filter((function(e,n){return 1==t&&n>=i||0==t&&n<=i})).map((function(t){return Math.abs(e(t[r])-C["e"].x)})),s=0,o=1;o<a.length;o++)a[o]<a[s]&&(s=o);return s+=1==t?i:0,s},get_point_index:function(t,e,n,i){for(var r=n.map((function(n){return Math.abs(i(n[e])-t)})),a=0,s=1;s<r.length;s++)r[s]<r[a]&&(a=s);return a},draw_slider_line:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=[{x0:this.min,x1:this.max,c:this.unselColor,d:e},{x0:this.selected[0],x1:this.selected[1],c:this.selColor,d:!0}].filter((function(t){return t.d})),r=C["q"]("#"+this.htmlid).selectAll("line");e||(r=r.filter((function(t,e){return 1==e}))),r.remove(),this.svg.selectAll("slines").data(i).enter().append("line").attr("x1",(function(e){return t(e.x0)})).attr("y1",this.heightHist+this.margin.bet).attr("x2",(function(e){return t(e.x1)})).attr("y2",this.heightHist+this.margin.bet).attr("stroke",(function(t){return t.c})).attr("stroke-width",this.thickness).on("mouseover",(function(){return n.show_tooltips()})).on("mouseout",(function(){return n.hide_tooltips()}))},show_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!1).style("left",window.pageXOffset+this.getBoundingClientRect().left-t.cursorRad+"px").style("top",window.pageYOffset+this.getBoundingClientRect().top+25+"px").html(t.selected[n])}))},hide_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!0)}))},time_usage:function(){var t={},e=JSON.parse(JSON.stringify(this.$store.state.fdata)),n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=o["App Name"];t[l]||(t[l]=0),t[l]+=o["Duration"]}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return this.utime=t,t},switches:function(){var t=this,e=new Set,n=JSON.parse(JSON.stringify(this.$store.state.fdata)),i=!0,r=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;e.add(l["User_ID"])}}catch(D){r=!0,a=D}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}var u={},c=!0,h=!1,d=void 0;try{for(var p,f=this.app_names[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value;u[m]={};var g=!0,v=!1,_=void 0;try{for(var y,b=this.app_names[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var x=y.value;u[m][x]=0}}catch(D){v=!0,_=D}finally{try{g||null==b.return||b.return()}finally{if(v)throw _}}}}catch(D){h=!0,d=D}finally{try{c||null==f.return||f.return()}finally{if(h)throw d}}var w=!0,S=!1,k=void 0;try{for(var C,A=function(){var e=C.value,i=n.filter((function(t){return t["User_ID"]==e})).sort((function(t,e){return t.Time-e.Time})),r=void 0,a=void 0,s=!0,o=!1,l=void 0;try{for(var c,h=i[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value,p=d["App Name"];void 0!=r&&r!=p&&d["Time"]-a<t.delta&&(u[r][p]+=1),r=p,a=d["Time"]}}catch(D){o=!0,l=D}finally{try{s||null==h.return||h.return()}finally{if(o)throw l}}},j=e[Symbol.iterator]();!(w=(C=j.next()).done);w=!0)A()}catch(D){S=!0,k=D}finally{try{w||null==j.return||j.return()}finally{if(S)throw k}}return this.links=u,u},sequences:function(){for(var t=new Set,e=JSON.parse(JSON.stringify(this.$store.state.fdata)),n=Object.keys(e),i=0;i<n.length;i++)e[n[i]]["row_id"]=i;var r=!0,a=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;t.add(u["User_ID"])}}catch(S){a=!0,s=S}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}var c=[],h=!0,d=!1,p=void 0;try{for(var f,m=function(){var t=f.value,n=e.filter((function(e){return e["User_ID"]==t})).sort((function(t,e){return t.Time-e.Time})),i=[],r=!1,a=[],s=!0,o=!1,l=void 0;try{for(var u,h=n[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var d=u.value;if("Screen on (unlocked)"===d["App Name"]&&!r||"Screen on (unlocked)"===d["App Name"]&&1===a.length)a=[["Screen on (unlocked)",d["row_id"]]],r=!0;else if("Screen off"==d["App Name"]&&r)i.push({path:a}),r=!1;else if(r){if(a.length>1&&d["App Name"]==a[a.length-1])continue;a.push([d["App Name"],d["row_id"]])}}}catch(S){o=!0,l=S}finally{try{s||null==h.return||h.return()}finally{if(o)throw l}}v=i.reduce((function(t,e){return e.path.reduce((function(t,e){return t[e[0]]=t[e[0]]||{nb_use:0,row_id:[]},t[e[0]]["nb_use"]+=1,t[e[0]]["row_id"].push(e[1]),t[e[0]]}),t),t}),{}),c.push(v)},g=t[Symbol.iterator]();!(h=(f=g.next()).done);h=!0){var v;m()}}catch(S){d=!0,p=S}finally{try{h||null==g.return||g.return()}finally{if(d)throw p}}var _=c[0],y=Object.keys(_)[0];this.set_app_nb_use_by_index(y,_[y]);for(var b=[],x=Object.keys(this.test),w=0;w<n.length;w++)x.includes(w.toString())?b.push(this.test[w][1]):b.push(0)},set_app_nb_use_by_index:function(t,e){var n=Object.keys(e);if(n.length>0){var i=!0,r=!1,a=void 0;try{for(var s,o=n[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;"nb_use"!=l&&"row_id"!=l&&this.set_app_nb_use_by_index(l,e[l])}}catch(m){r=!0,a=m}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}}this.model.push(e["nb_use"]);var u=!0,c=!1,h=void 0;try{for(var d,p=e["row_id"][Symbol.iterator]();!(u=(d=p.next()).done);u=!0){var f=d.value;this.test[f]=[t,e["nb_use"]]}}catch(m){c=!0,h=m}finally{try{u||null==p.return||p.return()}finally{if(c)throw h}}}}}),gt=mt,vt=(n("73c3"),Object(f["a"])(gt,pt,ft,!1,null,null,null)),_t=vt.exports;g()(vt,{VContainer:v["a"],VTooltip:b["a"]});var yt={name:"FilterGroup",components:{UserFilter:dt,RangeSlider:_t,MapFilter:L,TimePeriodPicker:Y},mounted:function(){this.index_filtered=[new Set,new Set,new Set],this.range_filtered=new Array,this.edges_filtered=new Array},methods:{mapChange:function(t){this.index_filtered[0]=new Set(t),this.filter_norange()},rangeChange:function(t,e){"time"==e?(this.range_filtered=t,this.filter_range()):"switch"==e&&(this.edges_filtered=t,this.$root.$emit("handleEdgesForceGraph",this.edges_filtered))},userChange:function(t){this.index_filtered[1]=new Set(t),this.filter_norange()},timePickerChange:function(t){this.index_filtered[2]=new Set(t),this.filter_norange()},filter_norange:function(){var t;t=this.index_filtered;var e=t.reduce((function(t,e){return new Set([].concat(Object(l["a"])(t),Object(l["a"])(e)))})),n=this.$store.state.data.filter((function(t,n){return!e.has(n)}));this.$store.commit("setFilteredDataset",n),this.$store.commit("setFinalDataset",n),this.$root.$emit("redrawSlider")},filter_range:function(){var t=this,e=this.$store.state.fdata.filter((function(e,n){return!t.range_filtered.includes(n)}));this.$store.commit("setFinalDataset",e),this.$root.$emit("redrawForceGraph")}}},bt=yt,xt=Object(f["a"])(bt,rt,at,!1,null,null,null),wt=xt.exports;g()(xt,{VCol:tt["a"],VContainer:v["a"],VRow:et["a"]});var St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{position:"relative"},attrs:{id:"force-container"}},[n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{id:"graph-help",title:""}},i))]}}])},[n("div",[t._v(" Les noeuds correspondent aux applications, les arêtes aux basculements entre applications. Les points en dessous de chaque nom correspondent aux couleurs des utilisateurs ayant utilisé ces applications. ")])]),n("v-switch",{staticClass:"graph-switch",attrs:{label:t.visuSwitch?"Graphe de switch":"Arbre radial"},on:{change:t.changed},model:{value:t.visuSwitch,callback:function(e){t.visuSwitch=e},expression:"visuSwitch"}})],1)},kt=[],Ct=(n("1276"),n("d4ec")),At=n("bee2"),jt=function(){function t(e,n){Object(Ct["a"])(this,t),this.delta=n,this.build_apps_info(e),this.build_assets(),this.build_adjacency_mat(e)}return Object(At["a"])(t,[{key:"build_apps_info",value:function(t){this.apps=new Set;var e=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.apps.add(s["App Name"])}}catch(f){n=!0,i=f}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.apps=Array.from(this.apps),this.apps_users=new Array(this.apps.length).fill(void 0),this.users=new Set,this.apps_time=new Array(this.apps.length).fill(0);var o=!0,l=!1,u=void 0;try{for(var c,h=t[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,p=this.get_app_index(d["App Name"]);this.apps_time[p]+=d["Duration"],void 0==this.apps_users[p]&&(this.apps_users[p]=new Set),this.apps_users[p].add(d["User_ID"]),this.users.add(d["User_ID"])}}catch(f){l=!0,u=f}finally{try{o||null==h.return||h.return()}finally{if(l)throw u}}}},{key:"get_assets_location",value:function(){var t=location.pathname;return t.substr(0,t.indexOf("/viz-habits/")+12)+"data/logos/"}},{key:"build_assets",value:function(){var t=this,e=this;this.images=new Array(this.apps.length),this.colors=new Array(this.apps.length);var n=this.get_assets_location(),i=function(i){var r=t.apps[i].toLowerCase();t.images[i]=n+r+"/logo_circle.png";var a=n+r+"/best_color.txt",s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",a,!0),s.onreadystatechange=function(){4==s.readyState&&"200"==s.status&&(e.colors[i]=s.responseText.split(" ").map((function(t){return parseInt(t)})))},s.send(null)};for(var r in this.apps)i(r)}},{key:"build_adjacency_mat",value:function(t){var e=this,n=new Set,i=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;n.add(l["User_ID"])}}catch(m){r=!0,a=m}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}this.adj_mat=new Array(this.apps.length).fill(0).map((function(){return new Array(e.apps.length).fill(0)}));var u=!0,c=!1,h=void 0;try{for(var d,p=function(){var n=d.value,i=t.filter((function(t){return t["User_ID"]==n})).sort((function(t,e){return t.Time-e.Time})),r=void 0,a=void 0,s=!0,o=!1,l=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var h=u.value,p=e.get_app_index(h["App Name"]);void 0!=r&&r!=e.get_app_index(h["App Name"])&&h["Time"]-a<e.delta&&(e.adj_mat[r][p]+=1),r=p,a=h["Time"]}}catch(m){o=!0,l=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw l}}},f=n[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)p()}catch(m){c=!0,h=m}finally{try{u||null==f.return||f.return()}finally{if(c)throw h}}}},{key:"get_app_index",value:function(t){return this.apps.indexOf(t)}},{key:"get_as_json",value:function(){var t={nodes:[],links:[]};for(var e in this.apps)t.nodes.push({id:this.apps[e],time:this.apps_time[e],image:this.images[e],users:this.apps_users[e],only_one_user:1==this.users.size});for(var n in this.adj_mat)for(var i=this.get_app_index(this.apps[n]),r=this.adj_mat[i].reduce((function(t,e){return t+e})),a=0;a<n;a++){var s=this.get_app_index(this.apps[a]),o=this.adj_mat[s].reduce((function(t,e){return t+e})),l=this.adj_mat[n][a]+this.adj_mat[a][n];0!=l&&t.links.push({source:this.apps[n],target:this.apps[a],value:l,st:this.adj_mat[n][a],ts:this.adj_mat[a][n],fst:this.adj_mat[i][s]/r,fts:this.adj_mat[s][i]/o})}return t}}]),t}(),Dt={name:"ForceGraph",data:function(){return{svg:null,tooltip:null,width:null,height:null,toDelEdges:{},draggedNode:null,visuSwitch:!0}},computed:{cx:function(){return this.width/2},cy:function(){return this.height/2}},mounted:function(){var t=this,e=document.getElementById("force-container");this.width=e.offsetWidth,this.height=890,this.svg=C["q"]("#force-container").append("svg").attr("width",this.width).attr("height",this.height),this.tooltip=C["q"]("#force-container").append("div").attr("class","hidden tooltip"),this.draw_graph(),this.$root.$on("redrawForceGraph",(function(){t.draw_graph()})),this.$root.$on("handleEdgesForceGraph",(function(e){t.toDelEdges={};var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;t.toDelEdges[o[0]]||(t.toDelEdges[o[0]]=[]),t.toDelEdges[o[0]].push(o[1])}}catch(l){i=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}t.draw_graph()}))},methods:{changed:function(t){this.$emit("changeVisu",t)},draw_graph:function(){this.svg.selectAll("*").remove();var t=this.$store.state.finaldata,e=new jt(t,10);t=e.get_as_json(),this.draw(e.get_as_json())},get_correct_time:function(t){return t/30},get_radius:function(t){return Math.sqrt(this.get_correct_time(t)/Math.PI)+5},seconds_to_time:function(t){var e=Math.floor(t/3600),n=e>0?e+"h ":"";t%=3600;var i=Math.floor(t/60),r=i>0?i+"m ":"",a=t%60+"s";return n+r+a},mouse_over:function(t,e,n){null!=this.draggedNode&&(t=this.draggedNode);var i=new Set;n.filter((function(e){var n=e.source.id!=t.id&&e.target.id!=t.id&&e.value>0;return!n&&e.value>0&&i.add(e.source.id==t.id?e.target.id:e.source.id),n})).style("opacity",.1),e.filter((function(e){return!i.has(e.id)&&e.id!=t.id})).style("opacity",.1)},mouse_out:function(t,e){e.style("opacity",1),t.style("opacity",1)},draw:function(t){var e=this,n=C["i"]().force("link",C["h"]().id((function(t){return t.id})).distance((function(t){return 480}))).force("collide",C["g"]().radius((function(t){return e.get_radius(t.time)+20}))).force("center",C["f"](this.cx,this.cy)),i=[];if("{}"===JSON.stringify(this.toDelEdges))i=t.links;else{var r=!0,a=!1,s=void 0;try{for(var o,l=t.links[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;this.toDelEdges[u.source]&&this.toDelEdges[u.source].includes(u.target)||i.push(u)}}catch(d){a=!0,s=d}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}var c=this.svg.append("g").attr("class","links").selectAll("line").data(i).enter().append("line").attr("stroke-width",(function(t){return Math.sqrt(t.value)})),h=this.svg.append("g").attr("class","nodes").selectAll("g").data(t.nodes).enter().append("g").call(C["d"]().on("start",(function(t){e.dragstarted(t,n)})).on("drag",(function(t){e.dragged(t)})).on("end",(function(t){e.dragended(t,n)}))).on("mouseover",(function(t){return e.mouse_over(t,h,c)})).on("mouseout",(function(t){return e.mouse_out(h,c)}));h.append("circle").attr("r",(function(t){return e.get_radius(t.time)})).attr("fill","#555").attr("stroke","white"),h.append("image").attr("xlink:href",(function(t){return t.image})).attr("width",(function(t){return 2*e.get_radius(t.time)})).attr("height",(function(t){return 2*e.get_radius(t.time)})).attr("x",(function(t){return-e.get_radius(t.time)})).attr("y",(function(t){return-e.get_radius(t.time)})),h.append("foreignObject").attr("width",140).attr("height",30).attr("x",-70).attr("y",(function(t){return 1.05*e.get_radius(t.time)})).append("xhtml:body").style("font-size","10px").style("text-align","center").style("text-shadow","0 0 1px black, 0 0 1px black, 0 0 1px black, 0 0 1px black").html((function(t){return"\n\t\t\t\t\t<div>".concat(t.id,"</div>\n\t\t\t\t\t").concat(t.only_one_user?"":'\n\t\t\t\t\t<div style="margin-top: -5px">\n\t\t\t\t\t\t'.concat(t.users.has(1)?'<span style="display: inline-block; width: 8px; height: 8px; border-radius: 40%; background-color: #CC2A36; border: #BBB 1px solid; "></span>':"","\n\t\t\t\t\t\t").concat(t.users.has(2)?'<span style="display: inline-block; width: 8px; height: 8px; border-radius: 40%; background-color: #4F372D; border: #BBB 1px solid; "></span>':"","\n\t\t\t\t\t\t").concat(t.users.has(3)?'<span style="display: inline-block; width: 8px; height: 8px; border-radius: 40%; background-color: #00A0B0; border: #BBB 1px solid; "></span>':"","\n\t\t\t\t\t</div>"),"\n\t\t\t\t")}));h.append("title").text((function(t){return t.id})),n.nodes(t.nodes).on("tick",(function(){e.ticked(c,h)})),n.force("link").links(i)},ticked:function(t,e){t.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),e.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))},dragstarted:function(t,e){C["e"].active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y,this.draggedNode=t},dragged:function(t){t.fx=C["e"].x,t.fy=C["e"].y},dragended:function(t,e){C["e"].active||e.alphaTarget(0),t.fx=null,t.fy=null,this.draggedNode=null}}},Ot=Dt,$t=(n("64c6"),n("b73d")),Rt=Object(f["a"])(Ot,St,kt,!1,null,null,null),Tt=Rt.exports;g()(Rt,{VContainer:v["a"],VSwitch:$t["a"],VTooltip:b["a"]});var Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{position:"relative"},attrs:{id:"radial-container"}},[n("v-tooltip",{attrs:{color:"success",right:"","max-width":"200px"},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("help-icon",t._g({staticClass:"icon-bigger",attrs:{id:"graph-help",title:""}},i))]}}])},[n("div",[t._v(" Ce tidy tree représentent les séquences d'applications habituelles dans le dataset et ce à partir de l'écran dévérouillé jusqu'au prochain verrouillage (non affiché puisque celui-ci serait alors présent sur chaque branche) ")])]),n("v-btn",{staticStyle:{color:"#252835"},attrs:{id:"tree-reset-btn",color:"#f5f9f9"},on:{click:t.resetRadialTree}},[t._v(" Restart Tree ")]),n("v-switch",{staticClass:"graph-switch",attrs:{label:t.visuSwitch?"Graphe de switch":"Arbre radial"},on:{change:t.changed},model:{value:t.visuSwitch,callback:function(e){t.visuSwitch=e},expression:"visuSwitch"}})],1)},qt=[],Nt=(n("a15b"),n("26e9"),function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Screen on (unlocked)";Object(Ct["a"])(this,t),this.delta=n,this.start=r,this.data=e,this.minimum=i,this.build_apps_info(this.data),this.build_assets(),setTimeout(1e4)}return Object(At["a"])(t,[{key:"build_apps_info",value:function(t){this.apps=new Set;var e=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.apps.add(s["App Name"])}}catch(f){n=!0,i=f}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.apps=Array.from(this.apps),this.apps_time=new Array(this.apps.length).fill(0);var o=!0,l=!1,u=void 0;try{for(var c,h=t[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var d=c.value,p=this.get_app_index(d["App Name"]);this.apps_time[p]+=d["Duration"]}}catch(f){l=!0,u=f}finally{try{o||null==h.return||h.return()}finally{if(l)throw u}}}},{key:"get_assets_location",value:function(){var t=location.pathname;return t.substr(0,t.indexOf("/viz-habits/")+12)+"data/logos/"}},{key:"build_assets",value:function(){var t=this,e=this;this.images={},this.colors={};var n=this.get_assets_location(),i=function(i){var r=t.apps[i].toLowerCase().split("/").join("-");t.images[t.apps[i]]=n+r+"/logo_circle.png";var a=n+r+"/best_color.txt",s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",a,!0),s.onreadystatechange=function(){if(4==s.readyState&&"200"==s.status){var t=s.responseText.split(" ").map((function(t){return parseInt(t)}));e.colors[e.apps[i]]={r:t[0],g:t[1],b:t[2]}}},s.send(null)};for(var r in this.apps)i(r)}},{key:"build_tree",value:function(t){var e=this;this.users=new Set;var n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;this.users.add(o["User_ID"])}}catch(m){i=!0,r=m}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}this.user_sequences={};var l=!0,u=!1,c=void 0;try{for(var h,d=function(){var n=h.value,i=t.filter((function(t){return t["User_ID"]==n})).sort((function(t,e){return t.Time-e.Time})),r=[],a=!1,s=[],o=!0,l=!1,u=void 0;try{for(var c,d=i[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var p=c.value;if(p["App Name"]===e.start&&!a||p["App Name"]===e.start&&1===s.length)s=[e.start],a=!0;else if("Screen off"!=p["App Name"]&&"Screen on (unlocked)"!=p["App Name"]||!a){if(a){if(s.length>1&&p["App Name"]==s[s.length-1])continue;s.push(p["App Name"])}}else r.push({path:s}),a=!1}}catch(m){l=!0,u=m}finally{try{o||null==d.return||d.return()}finally{if(l)throw u}}f=r.reduce((function(t,e){return e.path.reduce((function(t,e){return t[e]=t[e]||{nb_use:0},t[e]["nb_use"]+=1,t[e]}),t),t}),{}),e.user_sequences[n]=f},p=this.users[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var f;d()}}catch(m){u=!0,c=m}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}},{key:"get_app_index",value:function(t){return this.apps.indexOf(t)}},{key:"get_tree",value:function(){return this.build_tree(this.data),this.build_tree_from_json(),this.json_as_tree=this.filter_minimum(this.json_as_tree,this.minimum),this.json_as_tree}},{key:"build_tree_from_json",value:function(){var t=Object.keys(this.user_sequences[Object.keys(this.user_sequences)[0]])[0];return this.json_as_tree=this.get_app_tree(t,this.user_sequences[Object.keys(this.user_sequences)[0]][t]),this.json_as_tree}},{key:"get_app_tree",value:function(t,e){var n=[],i=Object.keys(e);if(i.length>0){var r=!0,a=!1,s=void 0;try{for(var o,l=i[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value;"nb_use"!=u&&n.push(this.get_app_tree(u,e[u]))}}catch(c){a=!0,s=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw s}}}return n.length>0?{name:t,image:this.images[t],nb_use:e["nb_use"],children:n}:{name:t,image:this.images[t],nb_use:e["nb_use"]}}},{key:"filter_minimum",value:function(t,e){if(t.nb_use>=e){var n=[];if(!(void 0!=t.children&&t.children.length>0))return t;var i=!0,r=!1,a=void 0;try{for(var s,o=t.children[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value,u=this.filter_minimum(l,e);void 0!=u&&n.push(u)}}catch(c){r=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(r)throw a}}return delete t.children,n.length>0&&(t.children=n),t}}}]),t}()),Mt={name:"RadialTree",props:{options:{type:Object,default:null}},data:function(){return{visuSwitch:!1}},mounted:function(){var t=this;this.start_app_name=null;var e=document.getElementById("radial-container");this.width=e.offsetWidth-50,this.height=890,this.svg=C["q"]("#radial-container").append("svg").attr("width",this.width).attr("height",this.height),this.tooltip=C["q"]("#radial-container").append("div").attr("class","hidden tooltipRadial"),this.draw_graph(),this.$root.$on("redrawRadialTree",(function(){t.draw_graph()}))},methods:{resetRadialTree:function(){this.start_app_name=null,this.draw_graph()},changed:function(t){this.$emit("changeVisu",t)},draw_graph:function(){this.svg.selectAll("*").remove();var t=this.$store.state.finaldata,e=this.$store.state.radialMinimum;null!=this.start_app_name?this.rtm=new Nt(t,10,e,this.start_app_name):this.rtm=new Nt(t,10,e),this.draw_tidy(this.rtm.get_tree())},get_correct_time:function(t){return t/10},seconds_to_time:function(t){var e=Math.floor(t/3600),n=e>0?e+"h ":"";t%=3600;var i=Math.floor(t/60),r=i>0?i+"m ":"",a=t%60+"s";return n+r+a},draw:function(t){var e=this,n=975,i=n/2,r=C["c"]().size([2*Math.PI,i-100]),a=r(C["j"](t).sort((function(t,e){return C["b"](t.data.name,e.data.name)}))),s=(this.svg.append("g").attr("id","links").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).selectAll("path").data(a.links()).enter().append("path").attr("stroke-width",(function(t){return t.target.data.nb_use/3})).attr("d",C["l"]().angle((function(t){return t.x})).radius((function(t){return t.y}))).on("mouseover",(function(t){e.enable_focus_path(t,e)})).on("mousemove",(function(t){var i=C["n"](C["q"]("body").node()),r=t.target.data.nb_use,a=r+" sequences";1==r&&(a=r+" sequence"),e.tooltip.classed("hidden",!1).attr("style","left:"+(i[0]-4*n/5)+"px; top:"+(i[1]-40)+"px").html(a)})).on("mouseout",(function(){e.tooltip.classed("hidden",!0),e.disable_focus()})),this.svg.append("g").attr("id","nodes").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(a.descendants().reverse()).enter().append("g").attr("transform",(function(t){return"\n\t\t\t\t\trotate(".concat(180*t.x/Math.PI-90,")\n\t\t\t\t\ttranslate(").concat(t.y,",0)")})).on("mouseover",(function(t){e.enable_focus_application(t,e)})).on("mousemove",(function(t){var i=C["n"](C["q"]("body").node());e.tooltip.classed("hidden",!1).attr("style","left:"+(i[0]-4*n/5)+"px; top:"+(i[1]-40)+"px").html(t.data.name)})).on("mouseout",(function(){e.tooltip.classed("hidden",!0),e.disable_focus()})).on("click",(function(t){e.tools_ref.send_filters(t.data.name),e.tooltip.classed("hidden",!0)})));s.append("circle").attr("fill",(function(t){return t.children?"#555":"#999"})).attr("r",2.5);s.append("image").attr("xlink:href",(function(t){return t.data.image})).attr("width",30).attr("height",30).attr("x",-15).attr("y",-15);function o(){var t=this.getBBox(),e=t.x,n=t.y,i=t.width,r=t.height;return[e,n,i,r]}this.svg.attr("viewBox",o)},draw_tidy:function(t){var e=this,n=975,i=n/2,r=C["s"]().size([2*Math.PI,i]).separation((function(t,e){return(t.parent==e.parent?1:2)/t.depth})),a=r(C["j"](t).sort((function(t,e){return C["b"](t.data.name,e.data.name)}))),s=(this.svg.append("g").attr("id","links").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).selectAll("path").data(a.links()).join("path").attr("stroke-width",(function(t){return Math.sqrt(t.target.data.nb_use)})).attr("d",C["l"]().angle((function(t){return t.x})).radius((function(t){return t.y}))).on("mouseover",(function(t){e.enable_focus_path(t,e)})).on("mousemove",(function(t){var i=C["n"](C["q"]("body").node()),r=t.target.data.nb_use,a=r+" sequences";1==r&&(a=r+" sequence"),e.tooltip.classed("hidden",!1).attr("style","left:"+(i[0]-4*n/5)+"px; top:"+(i[1]-40)+"px").html(a)})).on("mouseout",(function(){e.tooltip.classed("hidden",!0),e.disable_focus()})),this.svg.append("g").attr("id","nodes").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(a.descendants().reverse()).join("g").attr("transform",(function(t){return"\n\t\t\t\t\trotate(".concat(180*t.x/Math.PI-90,")\n\t\t\t\t\ttranslate(").concat(t.y,",0)")})).on("mouseover",(function(t){e.enable_focus_application(t,e)})).on("mousemove",(function(t){var i=C["n"](C["q"]("body").node());e.tooltip.classed("hidden",!1).attr("style","left:"+(i[0]-4*n/5)+"px; top:"+(i[1]-40)+"px").html(t.data.name)})).on("mouseout",(function(){e.tooltip.classed("hidden",!0),e.disable_focus()})).on("click",(function(t){e.start_app_name=t.data.name,e.draw_graph(),e.tooltip.classed("hidden",!0)})));s.append("circle").attr("fill",(function(t){return t.children?"#555":"#999"})).attr("r",2.5);s.append("image").attr("xlink:href",(function(t){return t.data.image})).attr("width",20).attr("height",20).attr("x",-10).attr("y",-10);function o(){var t=this.getBBox(),e=t.x,n=t.y,i=t.width,r=t.height;return[e,n,i,r]}this.svg.attr("viewBox",o)},enable_focus_path:function(t,e){var n=e.get_all_children(t.target),i=e.get_all_parents(t.target);C["q"]("#links").selectAll("path").attr("opacity",(function(t){return n.includes(t.target)?1:.2})),C["q"]("#nodes").selectAll("g").attr("opacity",(function(t){return i.includes(t)||n.includes(t)?1:.2}))},enable_focus_application:function(t,e){var n=[],i=[];C["q"]("#nodes").selectAll("g").each((function(r){t.data.name==r.data.name&&(n=n.concat(e.get_all_children(r)),i=i.concat(e.get_all_parents(r)))}));var r=[];C["q"]("#nodes").selectAll("g").attr("opacity",(function(t){return i.includes(t)||n.includes(t)?(r.push(t),1):.2})),C["q"]("#links").selectAll("path").attr("opacity",(function(t){return r.includes(t.target)?1:.2}))},disable_focus:function(){C["r"]("#nodes").selectAll("g").attr("opacity",(function(){return 1})),C["r"]("#links").selectAll("path").attr("opacity",(function(){return 1}))},get_all_parents:function(t){var e=[];while(null!=t.parent)e.push(t.parent),t=t.parent;return e},get_all_children:function(t){var e=[];if(e.push(t),void 0!=t.children){var n=!0,i=!1,r=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=this.get_all_children(o);e=e.concat(l)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return e}}},Et=Mt,Vt=(n("d67a"),Object(f["a"])(Et,Ft,qt,!1,null,null,null)),Lt=Vt.exports;g()(Vt,{VBtn:E["a"],VContainer:v["a"],VSwitch:$t["a"],VTooltip:b["a"]});var Pt={name:"Home",components:{FilterGroup:wt,FilterGroupRadial:it,ForceGraph:Tt,RadialTree:Lt},data:function(){return{fetched:!1,visu:!0,notChromeOrFirefox:!1,options:{licenseKey:"vhs@RA^t1",anchors:["vitrine","explications","visualisation"],sectionsColor:["#252835","#252835","#252835"],navigation:!0,navigationPosition:"right",navigationTooltips:["Première Page","Explications","Visualisation"]}}},mounted:function(){var t=this;document.documentElement.addEventListener("mouseup",(function(e){t.$store.commit("setDraggingState",{dragging:!1,dragStartRing:null,firstObject:null})}));var e=navigator.userAgent;-1==e.indexOf("Firefox")&&-1==e.indexOf("Chrome")&&(this.notChromeOrFirefox=!0),fetch("dataset.json").then((function(e){var n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e.json());case 2:n=i.sent,t.$store.commit("setBrutDataset",n),t.visu?(n=n.filter((function(t){return"Screen off"!=t["App Name"]&&!t["App Name"].startsWith("Screen on")})),t.$store.commit("setDataset",n),t.$store.commit("setFilteredDataset",n),t.$store.commit("setFinalDataset",n)):(t.$store.commit("setDataset",n),t.$store.commit("setFilteredDataset",n),t.$store.commit("setFinalDataset",n)),t.fetched=!0;case 6:case"end":return i.stop()}}))}))},methods:{changeVisu:function(t){this.visu=t;var e=this.$store.state.brutData;t?(e=e.filter((function(t){return"Screen off"!=t["App Name"]&&!t["App Name"].startsWith("Screen on")})),this.$store.commit("setDataset",e),this.$store.commit("setFilteredDataset",e),this.$store.commit("setFinalDataset",e)):(this.$store.commit("setDataset",e),this.$store.commit("setFilteredDataset",e),this.$store.commit("setFinalDataset",e))}}},Ut=Pt,Bt=(n("034fb"),n("0798")),It=n("7496"),zt=n("a75b"),Ht=n("490a"),Gt=Object(f["a"])(Ut,r,a,!1,null,null,null),Jt=Gt.exports;g()(Gt,{VAlert:Bt["a"],VApp:It["a"],VBtn:E["a"],VCol:tt["a"],VContainer:v["a"],VContent:zt["a"],VProgressCircular:Ht["a"],VRow:et["a"]});var Wt=n("8c4f");i["a"].use(Wt["a"]);var Kt=[],Xt=new Wt["a"]({routes:Kt}),Yt=Xt,Zt=(n("dca8"),n("2f62"));i["a"].use(Zt["a"]);var Qt=new Zt["a"].Store({state:{brutData:null,data:null,fdata:null,finaldata:null,usersSelection:[],draggingState:{dragging:!1,dragStartRing:null},radialMinimum:1},mutations:{setDraggingState:function(t,e){t.draggingState=e},setBrutDataset:function(t,e){t.brutData=Object.freeze(e)},setDataset:function(t,e){t.data=Object.freeze(e)},setFilteredDataset:function(t,e){t.fdata=Object.freeze(e)},setFinalDataset:function(t,e){t.finaldata=Object.freeze(e)},setDatasetRadial:function(t,e){t.dataRadial=Object.freeze(e)},setFilteredDatasetRadial:function(t,e){t.fdataRadial=Object.freeze(e)},setFinalDatasetRadial:function(t,e){t.finaldataRadial=Object.freeze(e)},setRadialMinimum:function(t,e){t.radialMinimum=Object.freeze(e)}},actions:{},modules:{}}),te=n("f309");i["a"].use(te["a"]);var ee=new te["a"]({theme:{dark:!0}}),ne=n("a45e"),ie=n.n(ne),re=(n("d48d"),n("8692"));i["a"].component("help-icon",re["a"]),i["a"].use(ie.a),i["a"].config.productionTip=!1,new i["a"]({router:Yt,store:Qt,vuetify:ee,render:function(t){return t(Jt)}}).$mount("#app")},"64c6":function(t,e,n){"use strict";var i=n("c83f"),r=n.n(i);r.a},"65fd":function(t,e,n){"use strict";var i=n("8c0c"),r=n.n(i);r.a},"67de":function(t,e,n){n("caad"),n("a434"),n("2532"),function(e){t.exports=e(n("e11e"))}((function(t){"use strict";t.SelectAreaFeature=t.Handler.extend({options:{color:"green",weight:2,dashArray:"5, 5, 1, 5",selCursor:"crosshair",normCursor:""},initialize:function(e,n){this._map=e,this._pre_latlon="",this._post_latlon="",this._ARR_latlon_line=[],this._ARR_latlon=[],this._area_pologon_layers=[],this._area_line="",this._area_line_new="",t.setOptions(this,n)},addHooks:function(){this._map.on("mousedown",this._doMouseDown,this),this._map.on("mouseup",this._doMouseUp,this),this._map.dragging.disable(),this._map._container.style.cursor=this.options.selCursor},removeHooks:function(){this._map.off("mousemove"),this._map.off("mousedown"),this._map.off("mouseup"),this._map._container.style.cursor=this.options.normCursor,this._map.dragging.enable()},_doMouseUp:function(e){this._pre_latlon="",this._post_latlon="",this._ARR_latlon_line=[],this._map.hasLayer(this._area_line)&&this._map.removeLayer(this._area_line),this._map.hasLayer(this._area_line_new)&&this._map.removeLayer(this._area_line_new),this._map.off("mousemove"),e.originalEvent.target.className.includes("control-lasso")||(this._area_pologon_layers.push(t.polygon(this._ARR_latlon,{color:this.options.color}).addTo(this._map)),this._map.fire("DrewArea"))},_doMouseDown:function(t){this._ARR_latlon=[],this._area_pologon="",this._area_line_new="",this._area_line="",this._map.on("mousemove",this._doMouseMove,this)},_doMouseMove:function(e){this._ARR_latlon.push(e.latlng),""==this._pre_latlon||"undefined"==this._pre_latlon?(this._pre_latlon=e.latlng,this._ARR_latlon_line.push(this._pre_latlon)):""==this._pre_latlon||""!=this._post_latlon&&"undefined"!=this._post_latlon?(this._pre_latlon=this._post_latlon,this._post_latlon=e.latlng,this._ARR_latlon_line.push(this._pre_latlon),this._ARR_latlon_line.push(this._post_latlon)):(this._post_latlon=e.latlng,this._ARR_latlon_line.push(this._post_latlon)),""!=this._pre_latlon&&""!=this._post_latlon&&(""==this._area_line_new&&""==this._area_line&&(this._area_line=t.polyline(this._ARR_latlon_line,{color:this.options.color,weight:this.options.weight,dashArray:this.options.dashArray}),this._area_line.addTo(this._map)),""==this._area_line_new&&""!=this._area_line&&(this._area_line_new=t.polyline(this._ARR_latlon_line,{color:this.options.color,weight:this.options.weight,dashArray:this.options.dashArray}),this._area_line_new.addTo(this._map),this._map.removeLayer(this._area_line)),""!=this._area_line_new&&""!=this._area_line&&(this._area_line=t.polyline(this._ARR_latlon_line,{color:this.options.color,weight:this.options.weight,dashArray:this.options.dashArray}),this._area_line.addTo(this._map),this._map.removeLayer(this._area_line_new),this._area_line_new=""))},getAreaLatLng:function(){return this._ARR_latlon},removeAllArea:function(){var t=0,e=!1;while(t<this._area_pologon_layers.length)this._map.removeLayer(this._area_pologon_layers[t]),t++,e=!0;return this._area_pologon_layers.splice(0,t),e},removeLastArea:function(){var t=this._area_pologon_layers.length-1;return!(t<0)&&(this._map.removeLayer(this._area_pologon_layers[t]),this._area_pologon_layers.splice(t,1),!0)},getFeaturesSelected:function(e){var n,i=[],r=0;while(r<this._area_pologon_layers.length)n=this._area_pologon_layers[r].getBounds(),this._map.eachLayer((function(r){("polygon"==e||"all"==e)&&r instanceof t.Polygon&&!n.equals(r.getBounds())&&n.contains(r.getBounds())&&i.push(r),("polyline"==e||"all"==e)&&r instanceof t.Polyline&&!n.equals(r.getBounds())&&n.contains(r.getBounds())&&i.push(r),("circle"==e||"all"==e)&&r instanceof t.Circle&&!n.equals(r.getBounds())&&n.contains(r.getBounds())&&i.push(r),("rectangle"==e||"all"==e)&&r instanceof t.Rectangle&&!n.equals(r.getBounds())&&n.contains(r.getBounds())&&i.push(r),("marker"==e||"all"==e)&&r instanceof t.Marker&&n.contains(r.getLatLng())&&i.push(r)})),r++;return 0==i.length&&(i=null),i}})}),window)},"73c3":function(t,e,n){"use strict";var i=n("991b"),r=n.n(i);r.a},"7a20":function(t,e,n){"use strict";var i=n("2b18"),r=n.n(i);r.a},"8a23":function(t,e,n){},"8c0c":function(t,e,n){},"991b":function(t,e,n){},a334:function(t,e,n){"use strict";var i=n("ffee"),r=n.n(i);r.a},b99c:function(t,e,n){"use strict";var i=n("fa86"),r=n.n(i);r.a},c4f0:function(t,e,n){},c83f:function(t,e,n){},d67a:function(t,e,n){"use strict";var i=n("c4f0"),r=n.n(i);r.a},fa86:function(t,e,n){},ffee:function(t,e,n){}});
//# sourceMappingURL=app.2dd97e72.js.map