(function(t){function e(e){for(var i,s,l=e[0],o=e[1],u=e[2],c=0,h=[];c<l.length;c++)s=l[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var o=n[s];0!==r[o]&&(i=!1)}i&&(a.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},r={app:0},a=[];function s(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"affb33e9"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=i);var a,o=document.createElement("script");o.charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.src=s(t);var u=new Error;a=function(e){o.onerror=o.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,n[1](u)}r[t]=void 0}};var c=setTimeout((function(){a({type:"timeout",target:o})}),12e4);o.onerror=o.onload=a,document.head.appendChild(o)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="viz-habits/",l.oe=function(t){throw console.error(t),t};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2b18":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-content",[n("router-view")],1)],1)},a=[],s=n("2877"),l=n("6544"),o=n.n(l),u=n("7496"),c=n("a75b"),d={},h=Object(s["a"])(d,r,a,!1,null,null,null),f=h.exports;o()(h,{VApp:u["a"],VContent:c["a"]});n("d3b7");var p=n("8c4f"),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t.fetched?n("v-container",{attrs:{fluid:""}},[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"5"}},[n("v-card",[n("FilterGroup")],1)],1),n("v-col",{attrs:{cols:"7"}},[n("v-card",[n("ForceGraph")],1)],1)],1)],1):t._e()],1)},g=[],v=(n("4de4"),n("2ca0"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","pb-0":""}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"6"}},[n("RangeSlider",{attrs:{subject:"time",nbbins:50,htmlid:"time"},on:{rangeChange:t.rangeChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("RangeSlider",{attrs:{subject:"switch",nbbins:50,delta:10,htmlid:"switch"},on:{rangeChange:t.rangeChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("UserFilter",{attrs:{users:["User1","User2","User3"]},on:{userChange:t.userChange}})],1),n("v-col",{attrs:{cols:"6"}},[n("TimePeriodPicker",{on:{timePickerChange:t.timePickerChange}})],1),n("MapFilter",{on:{mapChange:t.mapChange}})],1)],1)}),_=[],y=(n("caad"),n("d81d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-select",{attrs:{items:t.users,truc:"",label:"Users",multiple:"",outlined:""},on:{change:t.changed},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)}),b=[],x=(n("a4d3"),n("e01a"),n("d28b"),n("e25e"),n("ac1f"),n("3ca3"),n("5319"),n("ddb0"),n("3835")),w={name:"UserFilter",props:{users:{default:null,type:Array}},data:function(){return{selected:null}},mounted:function(){this.selected=this.users},methods:{changed:function(t){var e=[],n=[];t.map((function(t){n.push(parseInt(t.replace("User","")))}));var i=!0,r=!1,a=void 0;try{for(var s,l=this.$store.state.data.entries()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var o=Object(x["a"])(s.value,2),u=o[0],c=o[1];n.includes(c.User_ID)||e.push(u)}}catch(d){r=!0,a=d}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}this.$emit("userChange",e)}}},k=w,S=n("a523"),j=n("b974"),L=Object(s["a"])(k,y,b,!1,null,null,null),A=L.exports;o()(L,{VContainer:S["a"],VSelect:j["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{display:"inline"},attrs:{id:"container-"+t.htmlid}},[n("svg",{attrs:{id:t.htmlid}})])},O=[],M=(n("99af"),n("cb29"),n("a630"),n("c975"),n("13d5"),n("4e82"),n("a9e3"),n("6062"),n("5698"));n("498a");function R(t){var e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content.firstChild}var T={name:"RangeSlider",props:{subject:{default:null,type:String},nbbins:{default:null,type:Number},delta:{default:null,type:Number},htmlid:{default:null,type:String}},data:function(){return{svg:null,bins:null,thickness:5,cursorRad:7,selColor:"#69b3a2",unselColor:"#ddd",margin:{top:10,left:10,right:10,bottom:10,bet:15},selected:[0,1],heightHist:100,width:400,tooltips:null,utime:null,links:null}},computed:{app_names:function(){var t=new Set,e=!0,n=!1,i=void 0;try{for(var r,a=this.$store.state.data[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;t.add(s["App Name"])}}catch(l){n=!0,i=l}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return Array.from(t)},pp_data:function(){return"time"==this.subject?this.time_usage():"switch"==this.subject?this.switches().map((function(t){return t.filter((function(t){return 0!=t}))})).reduce((function(t,e){return t.concat(e)})):null},min:function(){return this.pp_data.reduce((function(t,e){return Math.min(t,e)}))},max:function(){return this.pp_data.reduce((function(t,e){return Math.max(t,e)}))},tooltip_style:function(){return"\n\t\t\t\tcolor: ".concat(this.selColor,";\n\t\t\t\tbackground-color: #fff;\n\t\t\t\tpadding: .4em;\n\t\t\t\tborder-radius: 10px;\n\t\t\t\tborder: 2px solid ").concat(this.selColor,";\n\t\t\t\tfont-size: 0.8em;\n\t\t\t\tfont-weight: bold;\n\t\t\t\topacity: 0.9;\n\t\t\t\tposition: absolute;\n\t\t\t")}},mounted:function(){var t=this,e=this;this.width=document.getElementById("container-"+this.htmlid).offsetWidth+50,this.width=this.width-this.margin.left-this.margin.right,this.tooltips=[M["select"]("body").append((function(){return R('<div id="'.concat(t.htmlid,'-tt1" style="').concat(t.tooltip_style,'" class="hidden tooltipSlider" />'))})),M["select"]("body").append((function(){return R('<div id="'.concat(t.htmlid,'-tt2" style="').concat(t.tooltip_style,'" class="hidden tooltipSlider" />'))}))],this.svg=M["select"]("#"+this.htmlid).attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.heightHist+this.margin.bet+this.thickness+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")");var n=M["scaleLinear"]().domain([this.min,this.max]).range([0,this.width]),i=M["scaleLinear"]().range([this.heightHist,0]),r=M["histogram"]().domain(n.domain()).thresholds(n.ticks(this.nbbins));this.bins=r(this.pp_data),this.selected=[this.bins[0].x0,this.bins[this.bins.length-1].x1],i.domain([0,M["max"](this.bins,(function(t){return t.length}))]);var a=this.svg.selectAll("rect").data(this.bins);a.enter().append("rect").attr("x",(function(t){return n(t.x0)})).attr("y",(function(t){return i(t.length)})).attr("width",(function(t){return n(t.x1)-n(t.x0)-1})).attr("height",(function(t){return e.heightHist-i(t.length)})).style("fill",(function(e){return e.x0>=t.selected[0]&&e.x1<=t.selected[1]?t.selColor:t.unselColor})),this.draw_slider_line(n),this.svg.selectAll("cursors").data(this.selected).enter().append("circle").attr("cx",(function(t){return n(t)})).attr("cy",this.heightHist+this.margin.bet).attr("r",this.cursorRad).style("fill",this.selColor).on("mouseover",(function(){return e.show_tooltips()})).on("mouseout",(function(){return e.hide_tooltips()})).call(M["drag"]().on("start",(function(){return e.show_tooltips()})).on("drag",(function(n,i){t.dragged(i),e.sendEvent()})).on("end",(function(){return e.hide_tooltips()})))},methods:{sendEvent:function(){var t=[];if("time"==this.subject){var e=[];for(var n in this.utime)(this.utime[n]<this.selected[0]||this.utime[n]>this.selected[1])&&e.push(this.app_names[n]);for(var i in this.$store.state.data)-1!=e.indexOf(this.$store.state.data[i]["App Name"])&&t.push(i)}else if("switch"==this.subject)for(var r in this.links)for(var a in this.links[r])(this.links[r][a]<this.selected[0]||this.links[r][a]>this.selected[1])&&t.push([this.app_names[r],this.app_names[a]]);this.$emit("rangeChange",t,this.htmlid)},dragged:function(t){var e=this;this.show_tooltips();var n=M["scaleLinear"]().domain([this.min,this.max]).range([0,this.width]),i=this.get_cursor_index(t,n),r="x"+t;this.selected[t]=this.bins[i][r],this.draw_slider_line(n,!1),this.svg.selectAll("circle").filter((function(e,n){return n==t})).attr("cx",n(this.bins[i][r])),this.svg.selectAll("rect").style("fill",(function(t){return t.x0>=e.selected[0]&&t.x1<=e.selected[1]?e.selColor:e.unselColor}))},get_cursor_index:function(t,e){for(var n=this.svg.selectAll("circle").filter((function(e,n){return n!=t})).attr("cx"),i=this.get_point_index(n,"x"+(1-t),this.bins,e),r="x"+t,a=this.bins.filter((function(e,n){return 1==t&&n>=i||0==t&&n<=i})).map((function(t){return Math.abs(e(t[r])-M["event"].x)})),s=0,l=1;l<a.length;l++)a[l]<a[s]&&(s=l);return s+=1==t?i:0,s},get_point_index:function(t,e,n,i){for(var r=n.map((function(n){return Math.abs(i(n[e])-t)})),a=0,s=1;s<r.length;s++)r[s]<r[a]&&(a=s);return a},draw_slider_line:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=[{x0:this.min,x1:this.max,c:this.unselColor,d:e},{x0:this.selected[0],x1:this.selected[1],c:this.selColor,d:!0}].filter((function(t){return t.d})),r=M["select"]("#"+this.htmlid).selectAll("line");e||(r=r.filter((function(t,e){return 1==e}))),r.remove(),this.svg.selectAll("slines").data(i).enter().append("line").attr("x1",(function(e){return t(e.x0)})).attr("y1",this.heightHist+this.margin.bet).attr("x2",(function(e){return t(e.x1)})).attr("y2",this.heightHist+this.margin.bet).attr("stroke",(function(t){return t.c})).attr("stroke-width",this.thickness).on("mouseover",(function(){return n.show_tooltips()})).on("mouseout",(function(){return n.hide_tooltips()}))},show_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!1).style("left",window.pageXOffset+this.getBoundingClientRect().left-t.cursorRad+"px").style("top",window.pageYOffset+this.getBoundingClientRect().top+25+"px").html(t.selected[n])}))},hide_tooltips:function(){var t=this;this.svg.selectAll("circle").each((function(e,n){t.tooltips[n].classed("hidden",!0)}))},time_usage:function(){var t=new Array(this.app_names.length).fill(0),e=!0,n=!1,i=void 0;try{for(var r,a=this.$store.state.data[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value,l=this.app_names.indexOf(s["App Name"]);t[l]+=s["Duration"]}}catch(o){n=!0,i=o}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return this.utime=t,t},switches:function(){var t=this,e=new Set,n=!0,i=!1,r=void 0;try{for(var a,s=this.$store.state.data[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;e.add(l["User_ID"])}}catch(m){i=!0,r=m}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}var o=new Array(this.app_names.length).fill(0).map((function(){return new Array(t.app_names.length).fill(0)})),u=!0,c=!1,d=void 0;try{for(var h,f=function(){var e=h.value,n=t.$store.state.data.filter((function(t){return t["User_ID"]==e})).sort((function(t,e){return t.Time-e.Time})),i=void 0,r=void 0,a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,f=t.app_names.indexOf(d["App Name"]);void 0!=i&&i!=f&&d["Time"]-r<t.delta&&(o[i][f]+=1),i=f,r=d["Time"]}}catch(m){s=!0,l=m}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}},p=e[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f()}catch(m){c=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}return this.links=o,o}}},P=T,V=(n("73c3"),Object(s["a"])(P,C,O,!1,null,null,null)),E=V.exports;o()(V,{VContainer:S["a"]});var $=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"mapFilter-container","pb-0":""}},[n("v-container",{staticClass:"d-inline-flex pa-0",attrs:{outlined:""}},[n("div",{staticStyle:{width:"20px"}},[n("v-range-slider",{staticClass:"latitude-slider",attrs:{min:0,max:1,step:.001,vertical:""},on:{input:t.onVerSlider},model:{value:t.latitudeRange,callback:function(e){t.latitudeRange=e},expression:"latitudeRange"}})],1),n("div",[n("div",{style:{width:t.mapWidth+"px"},attrs:{id:"map"}})])]),n("v-container",{staticClass:"d-inline-flex pa-0",attrs:{outlined:""}},[n("div",{staticStyle:{width:"20px"}}),n("div",[n("v-range-slider",{staticClass:"large-slider-hor",style:{width:t.mapWidth+"px"},attrs:{min:0,max:1,step:.001},on:{input:t.onHorSlider},model:{value:t.longitudeRange,callback:function(e){t.longitudeRange=e},expression:"longitudeRange"}})],1)])],1)},N=[],I=n("e11e"),B=n.n(I),D=n("cd4b"),q=Object.assign({},M,D),z={name:"Map",data:function(){return{latitudeRange:[0,1],longitudeRange:[0,1],map:null,minLat:null,maxLat:null,minLng:null,MaxLng:null,mapBounds:null,latLines:[null,null],lngLines:[null,null],veils:[null,null,null,null],mapWidth:null}},mounted:function(){var t,e,n,i,r,a,s,l,o,u,c,d,h,f=this;return regeneratorRuntime.async((function(p){while(1)switch(p.prev=p.next){case 0:return t=document.getElementById("mapFilter-container").parentNode.offsetWidth,this.mapWidth=t-50,p.next=4,regeneratorRuntime.awrap(q.json("dataset.json"));case 4:for(a in e=p.sent,n=45.782569,i=4.86673,this.map=new B.a.Map("map",{preferCanvas:!0}).setView([n,i],7),new B.a.TileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',minZoom:1,maxZoom:20}).addTo(this.map),r=q.scaleSequential().domain([1,3]).interpolator(q.interpolate("blue","red")),e)s=e[a],void 0!=s.Lat&&void 0!=s.Long&&(e[a].latlng=new B.a.LatLng(s.Lat,s.Long),B.a.circle(s.latlng,{color:r(s.User_ID),fillColor:r(s.User_ID),fillOpacity:.5,radius:3}).addTo(this.map));l=this.getMapBounds(),o=Object(x["a"])(l,4),u=o[0],c=o[1],d=o[2],h=o[3],this.veils[0]=this.makeVeil({lat:u,lng:d},{lat:c,lng:d}),this.veils[1]=this.makeVeil({lat:u,lng:d},{lat:u,lng:h}),this.veils[2]=this.makeVeil({lat:u,lng:h},{lat:c,lng:h}),this.veils[3]=this.makeVeil({lat:c,lng:d},{lat:c,lng:h}),this.latLines[0]=this.makePolyline({lat:u,lng:d},{lat:u,lng:h}),this.latLines[1]=this.makePolyline({lat:c,lng:d},{lat:c,lng:h}),this.lngLines[0]=this.makePolyline({lat:u,lng:d},{lat:c,lng:d}),this.lngLines[1]=this.makePolyline({lat:u,lng:h},{lat:c,lng:h}),this.map.on("move",(function(){f.computeNewMinMax(),f.drawHorLines(),f.drawVerLines(),f.drawVeils(),f.sendEvent()}));case 20:case"end":return p.stop()}}),null,this)},methods:{onHorSlider:function(){this.computeNewMinMax(),this.drawVerLines(),this.drawVeils(),this.sendEvent()},onVerSlider:function(){this.computeNewMinMax(),this.drawHorLines(),this.drawVeils(),this.sendEvent()},sendEvent:function(){var t=[],e=!0,n=!1,i=void 0;try{for(var r,a=this.$store.state.data.entries()[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=Object(x["a"])(r.value,2),l=s[0],o=s[1];(null==o.Lat||null==o.Long||o.Lat<this.minLat||o.Lat>this.maxLat||o.Long<this.minLng||o.Long>this.maxLng)&&t.push(l)}}catch(u){n=!0,i=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.$emit("mapChange",t)},computeNewMinMax:function(){this.mapBounds=this.getMapBounds();var t=Object(x["a"])(this.mapBounds,4),e=t[0],n=t[1],i=t[2],r=t[3],a=this.latitudeRange[0],s=this.latitudeRange[1];this.minLat=this.intervalShift(a,0,1,e,n),this.maxLat=this.intervalShift(s,0,1,e,n);var l=this.longitudeRange[0],o=this.longitudeRange[1];this.minLng=this.intervalShift(l,0,1,i,r),this.maxLng=this.intervalShift(o,0,1,i,r)},getMapBounds:function(){var t=this.map.getBounds(),e=t._southWest.lat,n=t._northEast.lat,i=t._southWest.lng,r=t._northEast.lng;return[e,n,i,r]},drawHorLines:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.latLines[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.map.removeLayer(a)}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}var s=Object(x["a"])(this.mapBounds,4),l=(s[0],s[1],s[2]),o=s[3],u=this;this.latLines[0]=this.makePolyline({lat:u.minLat,lng:l},{lat:u.minLat,lng:o}),this.latLines[1]=this.makePolyline({lat:u.maxLat,lng:l},{lat:u.maxLat,lng:o})},drawVerLines:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.lngLines[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.map.removeLayer(a)}}catch(c){e=!0,n=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}var s=Object(x["a"])(this.mapBounds,4),l=s[0],o=s[1],u=(s[2],s[3],this);this.lngLines[0]=this.makePolyline({lat:l,lng:u.minLng},{lat:o,lng:u.minLng}),this.lngLines[1]=this.makePolyline({lat:l,lng:u.maxLng},{lat:o,lng:u.maxLng})},drawVeils:function(){var t=!0,e=!1,n=void 0;try{for(var i,r=this.veils[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var a=i.value;this.map.removeLayer(a)}}catch(h){e=!0,n=h}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}var s=Object(x["a"])(this.mapBounds,4),l=s[0],o=s[1],u=s[2],c=s[3],d=this;this.veils[0]=this.makeVeil({lat:l,lng:u},{lat:o,lng:d.minLng}),this.veils[1]=this.makeVeil({lat:l,lng:d.minLng},{lat:d.minLat,lng:d.maxLng}),this.veils[2]=this.makeVeil({lat:l,lng:d.maxLng},{lat:o,lng:c}),this.veils[3]=this.makeVeil({lat:d.maxLat,lng:d.minLng},{lat:o,lng:d.maxLng})},intervalShift:function(t,e,n,i,r){return i+(r-i)/(n-e)*(t-e)},makePolyline:function(t,e){return B.a.polyline([[t.lat,t.lng],[e.lat,e.lng]],{color:"black",weight:2,opacity:.9}).addTo(this.map)},makeVeil:function(t,e){return B.a.rectangle([[t.lat,t.lng],[e.lat,e.lng]],{color:"black",weight:1}).addTo(this.map)}}},H=z,U=(n("65fd"),n("5963")),F=Object(s["a"])(H,$,N,!1,null,null,null),W=F.exports;o()(F,{VContainer:S["a"],VRangeSlider:U["a"]});var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"picker-component"}},[n("v-container",{attrs:{id:"picker-container"}}),t.initialized?n("Ring",{attrs:{id:"ring_1",name:"days",svg:t.svg,tooltip:t.tooltip,cx:t.cx,cy:135,outrad:132,inrad:112,selcol:"#374d7c",unselcol:"#ddd",data:t.daysTooltips},on:{ringChange:t.ringChange}}):t._e(),t.initialized?n("Ring",{attrs:{id:"ring_2",name:"hours",svg:t.svg,tooltip:t.tooltip,cx:t.cx,cy:135,outrad:106,inrad:86,selcol:"#46edc8",unselcol:"#ddd",data:t.hoursTooltips},on:{ringChange:t.ringChange}}):t._e(),t.initialized?n("Ring",{attrs:{id:"ring_3",name:"minutes",svg:t.svg,tooltip:t.tooltip,cx:t.cx,cy:135,outrad:80,inrad:60,selcol:"#fdf289",unselcol:"#ddd",data:t.minutesTooltips},on:{ringChange:t.ringChange}}):t._e()],1)},X=[],J=(n("0d03"),n("b64b"),n("2909")),Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},Z=[],K=(n("b0c0"),n("2532"),{name:"Ring",props:{svg:{default:null,type:Object},tooltip:{default:null,type:Object},id:{default:null,type:String},name:{default:null,type:String},cx:{default:null,type:Number},cy:{default:null,type:Number},outrad:{default:null,type:Number},inrad:{default:null,type:Number},selcol:{default:null,type:String},unselcol:{default:null,type:String},data:{default:null,type:Array}},data:function(){return{selected:null,g:null}},computed:{l:function(){return this.data.length},s_size:function(){return 1/(this.l*Math.PI)},r_length:function(){return 2*Math.PI/this.l},a_size:function(){return this.r_length-this.s_size},draggingState:function(){return this.$store.state.draggingState}},watch:{selected:{handler:function(t){var e=this.name;this.$store.commit("setTimePickerSelection",{key:e,value:t}),this.$emit("ringChange",t,e)},deep:!0}},mounted:function(){this.selected=new Array(this.l).fill(!0),this.draw(),this.parent=this.$el.parentNode},methods:{color:function(t){return this.selected[t]?this.selcol:this.unselcol},mouse_move:function(t,e){var n=M["mouse"](e),i=this.extendVector(n,50);this.tooltip.classed("hidden",!1).style("left",window.pageXOffset+i[0]+this.cx+"px").style("top",window.pageYOffset+i[1]+this.cy+"px").html(t)},extendVector:function(t,e){"days"==this.name&&(e+=10);var n=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)),i=n+e,r=[t[0]/n*i,t[1]/n*i];return"days"==this.name&&(r[0]-=10),r},mouse_over:function(t,e){if(this.draggingState.dragging){if(this.draggingState.dragStartRing&&this.draggingState.dragStartRing.includes(e)){this.$set(this.selected,t,!this.selected[t]);var n=this.color(t);M["select"](e).style("fill",n)}}else{var i=this.selected[t]?this.unselcol:this.selcol;M["select"](e).style("fill",i)}},mouse_out:function(t,e){if(!this.draggingState.dragging||!this.draggingState.dragStartRing||!this.draggingState.dragStartRing.includes(e)){var n=this.color(t);M["select"](e).transition().duration(300).style("fill",n)}this.tooltip.classed("hidden",!0)},on_click:function(t,e){this.$set(this.selected,t,!this.selected[t]);var n=this.color(t);M["select"](e).style("fill",n)},draw_arc:function(t){return M["arc"]().innerRadius(this.inrad).outerRadius(this.outrad).startAngle(t*this.r_length).endAngle(t*this.r_length+this.a_size)},draw:function(){var t=this;this.g=this.svg.append("g"),this.g.selectAll(this.id).data(this.data).enter().append("path").attr("transform","translate(".concat(t.cx,", ").concat(t.cy,")")).attr("d",(function(e,n){return t.draw_arc(n)()})).attr("fill",(function(e,n){return t.color(n)})).on("mousemove",(function(e){t.mouse_move(e,this)})).on("mouseout",(function(e,n){t.mouse_out(n,this)})).on("mouseover",(function(e,n){t.mouse_over(n,this)})).on("mousedown",(function(e,n,i){t.$set(t.selected,n,!t.selected[n]),t.setDraggingState(!0,i,e)})).on("mouseup",(function(e,n){t.setDraggingState(!1,null,null)}))},setDraggingState:function(t,e,n){this.$store.commit("setDraggingState",{dragging:t,dragStartRing:e,firstObject:n})}}}),Q=K,tt=Object(s["a"])(Q,Y,Z,!1,null,null,null),et=tt.exports,nt={name:"TimePeriodPicker",components:{Ring:et},data:function(){return{daysTooltips:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],granularity_minutes:5,svg:null,tooltip:null,initialized:!1,cx:null,timePicker:{}}},computed:{hoursTooltips:function(){var t=Object(J["a"])(Array(24).keys());for(var e in t)t[e]=e>12?"".concat(e-12,"pm"):"".concat(e,"am");return t},minutesTooltips:function(){for(var t=this.granularity_minutes,e=Object(J["a"])(Array(60/t).keys()),n=0;n<e.length;n++)e[n]=t>1?"".concat(n*t,"-").concat((n+1)*t):n;return e}},mounted:function(){var t=document.getElementById("picker-container"),e=t.offsetWidth;this.svg=M["select"](t).append("svg").attr("width",e).attr("height",270),this.cx=e/2,this.tooltip=M["select"](document.getElementById("picker-container")).append((function(){return R('<div class="hidden tooltipTimePicker" />')})),this.initialized=!0},methods:{ringChange:function(t,e){if(this.timePicker[e]=t,!(Object.keys(this.timePicker).length<3)){var n=[],i=!0,r=!1,a=void 0;try{for(var s,l=this.$store.state.data.entries()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var o=Object(x["a"])(s.value,2),u=o[0],c=o[1];if(isNaN(c.Time))n.push(u);else{var d=new Date(1e3*c.Time),h=d.getDay()-1;if(-1==h&&(h=6),this.timePicker["days"][h])if(this.timePicker["hours"][d.getHours()]){var f=Math.floor(d.getMinutes()/this.granularity_minutes);this.timePicker["minutes"][f]||n.push(u)}else n.push(u);else n.push(u)}}}catch(p){r=!0,a=p}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}this.$emit("timePickerChange",n)}}}},it=nt,rt=(n("7a20"),Object(s["a"])(it,G,X,!1,null,null,null)),at=rt.exports;o()(rt,{VContainer:S["a"]});var st={name:"FilterGroup",components:{UserFilter:A,RangeSlider:E,MapFilter:W,TimePeriodPicker:at},props:{dataset:{default:null,type:Object}},data:function(){return{index_filtered:{default:{user:[],map:[],range:[],time:[]},type:Object}}},methods:{mapChange:function(t){console.log(t)},rangeChange:function(t,e){},userChange:function(t){console.log(t)},timePickerChange:function(t){console.log(t)},filter_all:function(){var t=[],e=[];this.index_filtered.map((function(t){e.includes(t)||e.push(t)})),this.dataset.map((function(n,i){e.includes(i)||t.push(n)}))}}},lt=st,ot=n("62ad"),ut=n("0fd9"),ct=Object(s["a"])(lt,v,_,!1,null,null,null),dt=ct.exports;o()(ct,{VCol:ot["a"],VContainer:S["a"],VRow:ut["a"]});var ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"force-container"}})},ft=[],pt=(n("fb6a"),n("a434"),n("aff5"),n("1276"),n("d4ec")),mt=n("bee2"),gt=function(){function t(e,n){Object(pt["a"])(this,t),this.delta=n,this.build_apps_info(e),this.build_assets(),this.build_adjacency_mat(e),setTimeout(1e4),this.filtered_apps=this.apps.slice(),this.filtered_apps_time=this.apps_time.slice(),this.filtered_adj_mat=this.adj_mat.slice(),this.filtered_images=this.images.slice()}return Object(mt["a"])(t,[{key:"build_apps_info",value:function(t){this.apps=new Set;var e=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.apps.add(s["App Name"])}}catch(p){n=!0,i=p}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.apps=Array.from(this.apps),this.apps_time=new Array(this.apps.length).fill(0);var l=!0,o=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var h=c.value,f=this.get_app_index(h["App Name"]);this.apps_time[f]+=h["Duration"]}}catch(p){o=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(o)throw u}}}},{key:"get_assets_location",value:function(){var t=location.pathname;return t.substr(0,t.indexOf("/viz-habits/")+12)+"data/logos/"}},{key:"build_assets",value:function(){var t=this,e=this;this.images=new Array(this.apps.length),this.colors=new Array(this.apps.length);var n=this.get_assets_location(),i=function(i){var r=t.apps[i].toLowerCase();t.images[i]=n+r+"/logo_circle.png";var a=n+r+"/best_color.txt",s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",a,!0),s.onreadystatechange=function(){4==s.readyState&&"200"==s.status&&(e.colors[i]=s.responseText.split(" ").map((function(t){return parseInt(t)})))},s.send(null)};for(var r in this.apps)i(r)}},{key:"build_adjacency_mat",value:function(t){var e=this,n=new Set,i=!0,r=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var o=s.value;n.add(o["User_ID"])}}catch(m){r=!0,a=m}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}this.adj_mat=new Array(this.apps.length).fill(0).map((function(){return new Array(e.apps.length).fill(0)}));var u=!0,c=!1,d=void 0;try{for(var h,f=function(){var n=h.value,i=t.filter((function(t){return t["User_ID"]==n})).sort((function(t,e){return t.Time-e.Time})),r=void 0,a=void 0,s=!0,l=!1,o=void 0;try{for(var u,c=i[Symbol.iterator]();!(s=(u=c.next()).done);s=!0){var d=u.value,f=e.get_app_index(d["App Name"]);void 0!=r&&r!=e.get_app_index(d["App Name"])&&d["Time"]-a<e.delta&&(e.adj_mat[r][f]+=1),r=f,a=d["Time"]}}catch(m){l=!0,o=m}finally{try{s||null==c.return||c.return()}finally{if(l)throw o}}},p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f()}catch(m){c=!0,d=m}finally{try{u||null==p.return||p.return()}finally{if(c)throw d}}}},{key:"get_app_index",value:function(t){return this.apps.indexOf(t)}},{key:"remove_useless_apps",value:function(t,e,n,i,r){t=t.sort((function(t,e){return e-t}));var a=!0,s=!1,l=void 0;try{for(var o,u=t[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var c=o.value;for(var d in n.splice(c,1),i.splice(c,1),r.splice(c,1),e.splice(c,1),e)e[d].splice(c,1)}}catch(h){s=!0,l=h}finally{try{a||null==u.return||u.return()}finally{if(s)throw l}}}},{key:"get_useless_apps",value:function(t){var e=[];for(var n in t){var i=!0;for(var r in t[n])if(0!=t[n][r]||0!=t[r][n]){i=!1;break}i&&e.push(n)}return e}},{key:"apply_time_filter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER,n=[];for(var i in this.filtered_apps_time){var r=this.get_app_index(this.filtered_apps[i]);(this.apps_time[r]<t||this.apps_time[r]>e)&&n.push(i)}this.filtered_cumul_time=this.remove_useless_apps(n,this.filtered_adj_mat,this.filtered_apps,this.filtered_apps_time,this.filtered_images),n=this.get_useless_apps(this.filtered_adj_mat),this.filtered_cumul_time=this.remove_useless_apps(n,this.filtered_adj_mat,this.filtered_apps,this.filtered_apps_time,this.filtered_images)}},{key:"apply_frequency_filter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.filtered_adj_mat.map((function(t,e){var n=this.get_app_index(this.filtered_apps[e]);return this.adj_mat[n].reduce((function(t,e){return t+e}))}),this);this.filtered_adj_mat=this.filtered_adj_mat.map((function(i,r){return i.map((function(i){var a=i/n[r];return a<t||a>e?0:i}))}));var i=this.get_useless_apps(this.filtered_adj_mat);this.filtered_cumul_time=this.remove_useless_apps(i,this.filtered_adj_mat,this.filtered_apps,this.filtered_apps_time,this.filtered_images)}},{key:"apply_filters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.filtered_apps=this.apps.slice(),this.filtered_apps_time=this.apps_time.slice(),this.filtered_adj_mat=this.adj_mat.slice(),this.apply_time_filter(t,e),this.apply_frequency_filter(n,i)}},{key:"get_as_json",value:function(){var t={nodes:[],links:[]};for(var e in this.filtered_apps)t.nodes.push({id:this.filtered_apps[e],time:this.filtered_apps_time[e],image:this.filtered_images[e]});for(var n in this.filtered_adj_mat)for(var i=this.get_app_index(this.filtered_apps[n]),r=this.adj_mat[i].reduce((function(t,e){return t+e})),a=0;a<n;a++){var s=this.get_app_index(this.filtered_apps[a]),l=this.adj_mat[s].reduce((function(t,e){return t+e})),o=this.filtered_adj_mat[n][a]+this.filtered_adj_mat[a][n];0!=o&&t.links.push({source:this.filtered_apps[n],target:this.filtered_apps[a],value:o,st:this.filtered_adj_mat[n][a],ts:this.filtered_adj_mat[a][n],fst:this.adj_mat[i][s]/r,fts:this.adj_mat[s][i]/l})}return t}}]),t}(),vt={name:"ForceGraph",data:function(){return{svg:null,tooltip:null,width:null,height:null}},computed:{cx:function(){return this.width/2},cy:function(){return this.height/2}},mounted:function(){var t=document.getElementById("force-container");this.width=t.offsetWidth,this.height=890,this.svg=M["select"]("#force-container").append("svg").attr("width",this.width).attr("height",this.height),this.tooltip=M["select"]("#force-container").append("div").attr("class","hidden tooltip");var e=this.$store.state.data,n=new gt(e,10);n.apply_filters(0,1e10,0,1),e=n.get_as_json(),this.draw(n.get_as_json())},methods:{get_correct_time:function(t){return t/30},get_radius:function(t){return Math.sqrt(this.get_correct_time(t)/Math.PI)},seconds_to_time:function(t){var e=Math.floor(t/3600),n=e>0?e+"h ":"";t%=3600;var i=Math.floor(t/60),r=i>0?i+"m ":"",a=t%60+"s";return n+r+a},mouse_over:function(t,e,n){var i=new Set;n.filter((function(e){var n=e.source.id!=t.id&&e.target.id!=t.id&&e.value>0;return!n&&e.value>0&&i.add(e.source.id==t.id?e.target.id:e.source.id),n})).style("opacity",.1),e.filter((function(e){return!i.has(e.id)&&e.id!=t.id})).style("opacity",.1)},mouse_out:function(t,e){e.style("opacity",1),t.style("opacity",1)},draw:function(t){var e=this,n=M["forceSimulation"]().force("link",M["forceLink"]().id((function(t){return t.id})).distance((function(t){return-10*Math.sqrt(t.value)}))).force("charge",M["forceManyBody"]().strength((function(t){return-100*e.get_radius(t.time)}))).force("center",M["forceCenter"](this.cx,this.cy)),i=this.svg.append("g").attr("class","links").selectAll("line").data(t.links).enter().append("line").attr("stroke-width",(function(t){return Math.sqrt(t.value)})),r=this.svg.append("g").attr("class","nodes").selectAll("g").data(t.nodes).enter().append("g").call(M["drag"]().on("start",(function(t){e.dragstarted(t,n)})).on("drag",(function(t){e.dragged(t)})).on("end",(function(t){e.dragended(t,n)}))).on("mouseover",(function(t){return e.mouse_over(t,r,i)})).on("mouseout",(function(t){return e.mouse_out(r,i)}));r.append("circle").attr("r",(function(t){return e.get_radius(t.time)})).attr("fill","white").attr("stroke","black"),r.append("image").attr("xlink:href",(function(t){return t.image})).attr("width",(function(t){return 2*e.get_radius(t.time)})).attr("height",(function(t){return 2*e.get_radius(t.time)})).attr("x",(function(t){return-e.get_radius(t.time)})).attr("y",(function(t){return-e.get_radius(t.time)})),r.append("text").text((function(t){return t.id})).attr("text-anchor","middle").attr("x",0).attr("y",(function(t){return e.get_radius(t.time)+16}));r.append("title").text((function(t){return t.id})),n.nodes(t.nodes).on("tick",(function(){e.ticked(i,r)})),n.force("link").links(t.links)},ticked:function(t,e){t.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),e.attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")}))},dragstarted:function(t,e){M["event"].active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},dragged:function(t){t.fx=M["event"].x,t.fy=M["event"].y},dragended:function(t,e){M["event"].active||e.alphaTarget(0),t.fx=null,t.fy=null}}},_t=vt,yt=(n("64c6"),Object(s["a"])(_t,ht,ft,!1,null,null,null)),bt=yt.exports;o()(yt,{VContainer:S["a"]});var xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"radial-container"}})},wt=[],kt=(n("a15b"),n("26e9"),function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Screen on (unlocked)";Object(pt["a"])(this,t),this.delta=n,this.start=i,this.data=e,this.build_apps_info(this.data),this.build_assets(),this.build_tree(this.data),setTimeout(1e4)}return Object(mt["a"])(t,[{key:"build_apps_info",value:function(t){this.apps=new Set;var e=!0,n=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;this.apps.add(s["App Name"])}}catch(p){n=!0,i=p}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}this.apps=Array.from(this.apps),this.apps_time=new Array(this.apps.length).fill(0);var l=!0,o=!1,u=void 0;try{for(var c,d=t[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var h=c.value,f=this.get_app_index(h["App Name"]);this.apps_time[f]+=h["Duration"]}}catch(p){o=!0,u=p}finally{try{l||null==d.return||d.return()}finally{if(o)throw u}}}},{key:"get_assets_location",value:function(){var t=location.pathname;return t.substr(0,t.indexOf("/viz-habits/")+12)+"data/logos/"}},{key:"build_assets",value:function(){var t=this,e=this;this.images={},this.colors={};var n=this.get_assets_location(),i=function(i){var r=t.apps[i].toLowerCase().split("/").join("-");t.images[t.apps[i]]=n+r+"/logo_circle.png";var a=n+r+"/best_color.txt",s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",a,!0),s.onreadystatechange=function(){if(4==s.readyState&&"200"==s.status){var t=s.responseText.split(" ").map((function(t){return parseInt(t)}));e.colors[e.apps[i]]={r:t[0],g:t[1],b:t[2]}}},s.send(null)};for(var r in this.apps)i(r)}},{key:"build_tree",value:function(t){var e=this;this.users=new Set;var n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this.users.add(l["User_ID"])}}catch(m){i=!0,r=m}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}this.user_sequences={};var o=!0,u=!1,c=void 0;try{for(var d,h=function(){var n=d.value,i=t.filter((function(t){return t["User_ID"]==n})).sort((function(t,e){return t.Time-e.Time})),r=[],a=!1,s=[],l=!0,o=!1,u=void 0;try{for(var c,h=i[Symbol.iterator]();!(l=(c=h.next()).done);l=!0){var f=c.value;f["App Name"]!=e.start||a?"Screen off"==f["App Name"]&&a?(r.push({path:s}),a=!1):a&&s.push(f["App Name"]):(s=[e.start],a=!0)}}catch(m){o=!0,u=m}finally{try{l||null==h.return||h.return()}finally{if(o)throw u}}p=r.reduce((function(t,e){return e.path.reduce((function(t,e){return t[e]=t[e]||{nb_use:0},t[e]["nb_use"]+=1,t[e]}),t),t}),{}),e.user_sequences[n]=p},f=this.users[Symbol.iterator]();!(o=(d=f.next()).done);o=!0){var p;h()}}catch(m){u=!0,c=m}finally{try{o||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"get_app_index",value:function(t){return this.apps.indexOf(t)}},{key:"get_users",value:function(){return this.users}},{key:"get_maximum_length",value:function(){return this.maximum}},{key:"get_tree",value:function(){return this.json_as_tree}},{key:"build_tree_from_json",value:function(){var t=Object.keys(this.user_sequences[this.user_id])[0];return this.json_as_tree=this.get_app_tree(t,this.user_sequences[this.user_id][t]),this.json_as_tree}},{key:"get_app_tree",value:function(t,e){var n=[];if(Object.keys(e).length>0)for(var i=0,r=Object.keys(e);i<r.length;i++){var a=r[i];if("nb_use"!=a){e[a];n.push(this.get_app_tree(a,e[a]))}}return n.length>0?{name:t,image:this.images[t],nb_use:e["nb_use"],children:n}:{name:t,image:this.images[t],nb_use:e["nb_use"]}}},{key:"get_tree_uses",value:function(){var t=this.get_node_uses(this.json_as_tree).sort(),e=[],n=!0,i=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;e.includes(l)||e.push(l)}}catch(o){i=!0,r=o}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return e.sort((function(t,e){return t-e}))}},{key:"get_node_uses",value:function(t){var e=[];if(e.push(t.nb_use),void 0!=t.children&&t.children.length>0){var n=!0,i=!1,r=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,o=this.get_node_uses(l);e=e.concat(o)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return e}},{key:"filter_tree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Screen on (unlocked)";arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.user_id=t,this.start=n,this.build_tree(this.data),this.build_tree_from_json(),this.json_as_tree=this.filter_minimum(this.json_as_tree,e)}},{key:"filter_minimum",value:function(t,e){if(t.nb_use>=e){var n=[];if(!(void 0!=t.children&&t.children.length>0))return t;var i=!0,r=!1,a=void 0;try{for(var s,l=t.children[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var o=s.value,u=this.filter_minimum(o,e);void 0!=u&&n.push(u)}}catch(c){r=!0,a=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw a}}return delete t.children,n.length>0&&(t.children=n),t}}},{key:"filter_screen_off_leaf",value:function(t){var e=[];if(void 0!=t.children&&1==t.children.length&&"Screen off"==t.children[0].name&&(delete t.children,t.children=e),void 0!=t.children&&t.children.length>0){var n=!0,i=!1,r=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,o=this.filter_screen_off_leaf(l);e.push(o)}}catch(g){i=!0,r=g}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}if(delete t.children,t.children=e,t.children.length>0){var u=0,c=!0,d=!1,h=void 0;try{for(var f,p=t.children[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var m=f.value;u+=m.nb_use}}catch(g){d=!0,h=g}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}t.nb_use=u}return t}}]),t}()),St={name:"RadialTree",props:{options:{type:Object,default:null}},mounted:function(){var t=this;fetch("dataset.json").then((function(e){var n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e.json());case 2:n=i.sent,t.rtm=new kt(n,10),t.rtm.filter_tree(),t.svg=M["select"]("#radial-container").append("svg").attr("width",1e3).attr("height",1e3),t.tooltip=M["select"]("body").append("div").attr("class","hidden tooltip"),t.update_filters("Screen on (unlocked)","1",10,"dendogram");case 8:case"end":return i.stop()}}))}))},methods:{update_filters:function(t,e,n,i){console.log("hzelo");var r=M["select"]("#tree").node();null!=r&&r.remove(),console.log(i),"dendogram"==i?this.display_function=this.draw_den:"tidy"==i?this.display_function=this.draw_tidy:"line"==i&&(this.display_function=this.draw_line),this.display_function()},get_correct_time:function(t){return t/10},get_size:function(t){return Math.sqrt(this.get_correct_time(t)/Math.PI)},seconds_to_time:function(t){var e=Math.floor(t/3600),n=e>0?e+"h ":"";t%=3600;var i=Math.floor(t/60),r=i>0?i+"m ":"",a=t%60+"s";return n+r+a},draw_den:function(){var t=this,e=this.rtm.get_tree(),n=975,i=n/2,r=M["cluster"]().size([2*Math.PI,i-100]),a=r(M["hierarchy"](e).sort((function(t,e){return M["ascending"](t.data.name,e.data.name)}))),s=(this.svg.append("g").attr("id","links").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).selectAll("path").data(a.links()).enter().append("path").attr("stroke-width",(function(t){return t.target.data.nb_use/3})).attr("d",M["linkRadial"]().angle((function(t){return t.x})).radius((function(t){return t.y}))).on("mouseover",(function(e){t.enable_focus_path(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node()),i=e.target.data.nb_use,r=i+" sequences";1==i&&(r=i+" sequence"),t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(r)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()})),this.svg.append("g").attr("id","nodes").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(a.descendants().reverse()).enter().append("g").attr("transform",(function(t){return"\n\t\t\t\t\trotate(".concat(180*t.x/Math.PI-90,")\n\t\t\t\t\ttranslate(").concat(t.y,",0)")})).on("mouseover",(function(e){t.enable_focus_application(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node());t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(e.data.name)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()})).on("click",(function(e){t.tools_ref.send_filters(e.data.name),t.tooltip.classed("hidden",!0)})));s.append("circle").attr("fill",(function(t){return t.children?"#555":"#999"})).attr("r",2.5);s.append("image").attr("xlink:href",(function(t){return t.data.image})).attr("width",20).attr("height",20).attr("x",-10).attr("y",-10);function l(){var t=this.getBBox(),e=t.x,n=t.y,i=t.width,r=t.height;return[e,n,2*i,2*r]}this.svg.attr("viewBox",l)},enable_focus_path:function(t,e){var n=e.get_all_children(t.target),i=e.get_all_parents(t.target);M["select"]("#links").selectAll("path").attr("opacity",(function(t){return n.includes(t.target)?1:.2})),M["select"]("#nodes").selectAll("g").attr("opacity",(function(t){return i.includes(t)||n.includes(t)?1:.2}))},enable_focus_application:function(t,e){var n=[],i=[];M["select"]("#nodes").selectAll("g").each((function(r){t.data.name==r.data.name&&(n=n.concat(e.get_all_children(r)),i=i.concat(e.get_all_parents(r)))}));var r=[];M["select"]("#nodes").selectAll("g").attr("opacity",(function(t){return i.includes(t)||n.includes(t)?(r.push(t),1):.2})),M["select"]("#links").selectAll("path").attr("opacity",(function(t){return r.includes(t.target)?1:.2}))},disable_focus:function(){M["selectAll"]("#nodes").selectAll("g").attr("opacity",(function(){return 1})),M["selectAll"]("#links").selectAll("path").attr("opacity",(function(){return 1}))},get_all_parents:function(t){var e=[];while(null!=t.parent)e.push(t.parent),t=t.parent;return e},get_all_children:function(t){var e=[];if(e.push(t),void 0!=t.children){var n=!0,i=!1,r=void 0;try{for(var a,s=t.children[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,o=this.get_all_children(l);e=e.concat(o)}}catch(u){i=!0,r=u}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}}return e},draw_line:function(){var t=this,e=this.rtm.get_tree(),n={top:100,right:10,bottom:240,left:10},i=900-n.left-n.right,r=900-n.top-n.bottom,a=M["tree"]().size([i,r]),s=M["hierarchy"](e);s=a(s);s.descendants().slice(1);this.svg.selectAll(".link").data(s.links()).enter().append("path").attr("class","link").attr("d",M["linkHorizontal"]().x((function(t){return t.y})).y((function(t){return t.x}))).on("mouseover",(function(e){t.enable_focus_path(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node()),i=e.target.data.nb_use,r=i+" sequences";1==i&&(r=i+" sequence"),t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(r)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()}));var l=this.svg.selectAll(".node").data(s.descendants()).enter().append("g").on("mouseover",(function(e){t.enable_focus_application(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node());t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(e.data.name)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()})).on("click",(function(e){t.tools_ref.send_filters(e.data.name),t.tooltip.classed("hidden",!0)}));l.append("image").attr("xlink:href",(function(t){return t.data.image})).attr("width",20).attr("height",20).attr("x",(function(t){return t.y-10})).attr("y",(function(t){return t.x-10}))},draw_tidy:function(){var t=this,e=this.rtm.get_tree(),n=975,i=n/2,r=M["tree"]().size([2*Math.PI,i]).separation((function(t,e){return(t.parent==e.parent?1:2)/t.depth})),a=r(M["hierarchy"](e).sort((function(t,e){return M["ascending"](t.data.name,e.data.name)}))),s=(this.svg.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(a.links()).join("path").attr("d",M["linkRadial"]().angle((function(t){return t.x})).radius((function(t){return t.y}))).on("mouseover",(function(e){t.enable_focus_path(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node()),i=e.target.data.nb_use,r=i+" sequences";1==i&&(r=i+" sequence"),t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(r)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()})),this.svg.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(a.descendants().reverse()).join("g").attr("transform",(function(t){return"\n\t\t\t\t\trotate(".concat(180*t.x/Math.PI-90,")\n\t\t\t\t\ttranslate(").concat(t.y,",0)")})).on("mouseover",(function(e){t.enable_focus_application(e,t)})).on("mousemove",(function(e){var n=M["mouse"](M["select"]("body").node());t.tooltip.classed("hidden",!1).attr("style","left:"+(n[0]+10)+"px; top:"+(n[1]-15)+"px").html(e.data.name)})).on("mouseout",(function(){t.tooltip.classed("hidden",!0),t.disable_focus()})).on("click",(function(e){t.tools_ref.send_filters(e.data.name),t.tooltip.classed("hidden",!0)})));s.append("circle").attr("fill",(function(t){return t.children?"#555":"#999"})).attr("r",2.5);s.append("image").attr("xlink:href",(function(t){return t.data.image})).attr("width",20).attr("height",20).attr("x",-10).attr("y",-10);function l(){var t=this.getBBox(),e=t.x,n=t.y,i=t.width,r=t.height;return[e,n,2*i,2*r]}this.svg.attr("viewBox",l)}}},jt=St,Lt=(n("d67a"),Object(s["a"])(jt,xt,wt,!1,null,null,null));Lt.exports;o()(Lt,{VContainer:S["a"]});var At={name:"Home",components:{FilterGroup:dt,ForceGraph:bt},data:function(){return{fetched:!1}},computed:{timePickerSelection:{get:function(){return this.$store.state.timePickerSelection}}},mounted:function(){var t=this;document.documentElement.addEventListener("mouseup",(function(e){t.$store.commit("setDraggingState",{dragging:!1,dragStartRing:null,firstObject:null})})),fetch("dataset.json").then((function(e){var n;return regeneratorRuntime.async((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(e.json());case 2:n=i.sent,n=n.filter((function(t){return"Screen off"!=t["App Name"]&&!t["App Name"].startsWith("Screen on")})),t.$store.commit("setDataset",n),t.fetched=!0;case 6:case"end":return i.stop()}}))}))}},Ct=At,Ot=n("b0af"),Mt=Object(s["a"])(Ct,m,g,!1,null,null,null),Rt=Mt.exports;o()(Mt,{VCard:Ot["a"],VCol:ot["a"],VContainer:S["a"],VRow:ut["a"]}),i["a"].use(p["a"]);var Tt=[{path:"/",name:"home",component:Rt},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Pt=new p["a"]({routes:Tt}),Vt=Pt,Et=n("2f62");i["a"].use(Et["a"]);var $t=new Et["a"].Store({state:{data:null,timePickerSelection:{days:null,hours:null,minutes:null},usersSelection:[],draggingState:{dragging:!1,dragStartRing:null}},mutations:{setTimePickerSelection:function(t,e){t.timePickerSelection[e.key]=e.value},setUsersSelection:function(t,e){t.usersSelection=e},setDraggingState:function(t,e){t.draggingState=e},setDataset:function(t,e){t.data=e}},actions:{},modules:{}}),Nt=n("f309");i["a"].use(Nt["a"]);var It=new Nt["a"]({});i["a"].config.productionTip=!1,new i["a"]({router:Vt,store:$t,vuetify:It,render:function(t){return t(f)}}).$mount("#app")},"64c6":function(t,e,n){"use strict";var i=n("c83f"),r=n.n(i);r.a},"65fd":function(t,e,n){"use strict";var i=n("8c0c"),r=n.n(i);r.a},"73c3":function(t,e,n){"use strict";var i=n("991b"),r=n.n(i);r.a},"7a20":function(t,e,n){"use strict";var i=n("2b18"),r=n.n(i);r.a},"8c0c":function(t,e,n){},"991b":function(t,e,n){},c4f0:function(t,e,n){},c83f:function(t,e,n){},d67a:function(t,e,n){"use strict";var i=n("c4f0"),r=n.n(i);r.a}});
//# sourceMappingURL=app.c1b578f0.js.map